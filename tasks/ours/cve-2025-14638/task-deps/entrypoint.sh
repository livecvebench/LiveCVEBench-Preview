#!/bin/bash

# Entrypoint script for Pet Shop application
# Waits for MySQL to be ready before starting Apache

echo "Waiting for MySQL to be ready..."

while ! mysqladmin ping -h"${MYSQL_HOST:-db}" -u"root" -p"${MYSQL_ROOT_PASSWORD:-rootpassword}" --silent 2>/dev/null; do
    sleep 1
done

echo "MySQL is ready!"

# Start Apache in foreground
exec apache2-foreground
