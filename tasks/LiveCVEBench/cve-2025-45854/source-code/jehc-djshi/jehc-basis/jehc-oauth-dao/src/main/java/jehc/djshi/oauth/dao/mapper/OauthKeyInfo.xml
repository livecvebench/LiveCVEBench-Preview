<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.oauth.dao.OauthKeyInfoDao">
	<!--初始化分页-->
	<select id="getOauthKeyInfoListByCondition" resultType="jehc.djshi.oauth.model.OauthKeyInfo" parameterType="map">
		SELECT
			id,
			name,
		    app_id AS appId,
			app_key AS appKey,
			app_secret AS appSecret,
			key_exp_date AS keyExpDate,
			use_exp_date AS useExpDate,
			status,
			create_time AS createTime,
			update_time AS updateTime,
            create_id AS createId,
            update_id AS updateId,
			tenant_type AS tenantType
		FROM 
			oauth_key_info
		WHERE 1=1
		  	AND del_flag = 0
		<if test="null != name">
			AND name LIKE CONCAT(CONCAT('%',#{name}),'%')
		</if>
		<if test="null != tenantType">
			AND tenant_type = #{tenantType}
		</if>
	</select>

	<!--查询对象-->
	<select id="getOauthKeyInfoById" resultType="jehc.djshi.oauth.model.OauthKeyInfo" parameterType="string">
		SELECT
			id,
			name,
			app_id AS appId,
			app_key AS appKey,
			app_secret AS appSecret,
			key_exp_date AS keyExpDate,
			use_exp_date AS useExpDate,
			status,
			create_time AS createTime,
			update_time AS updateTime,
			create_id AS createId,
			update_id AS updateId,
			tenant_type AS tenantType
		FROM 
			oauth_key_info
		WHERE id=#{id}
	</select>

	<!--添加-->
	<insert id="addOauthKeyInfo" parameterType="jehc.djshi.oauth.model.OauthKeyInfo">
		INSERT INTO
			oauth_key_info
			(
			id,
			name,
			app_id,
			app_key,
			app_secret,
			key_exp_date,
			use_exp_date,
			status,
			create_time,
			update_time,
            create_id,
            update_id,
			tenant_type
			)
			VALUES
			(
			#{id},
			#{name},
			#{appId},
			#{appKey},
			#{appSecret},
			#{keyExpDate},
			#{useExpDate},
			#{status},
			#{createTime},
			#{updateTime},
            #{createId},
            #{updateId},
			#{tenantType}
			)
	</insert>

	<!--修改-->
	<update id="updateOauthKeyInfo" parameterType="jehc.djshi.oauth.model.OauthKeyInfo">
		UPDATE
			oauth_key_info
		SET
			name = #{name},
			app_id = #{appId},
			app_key = #{appKey},
			app_secret = #{appSecret},
			key_exp_date = #{keyExpDate},
			use_exp_date = #{useExpDate},
			status = #{status},
			update_time = #{updateTime},
			update_id = #{updateId},
			tenant_type = #{tenantType}
		WHERE id=#{id}
	</update>

	<!--修改（根据动态条件）-->
	<update id="updateOauthKeyInfoBySelective" parameterType="jehc.djshi.oauth.model.OauthKeyInfo">
		UPDATE
			oauth_key_info
		<set>
			<if test="name != null">
				name = #{name},
			</if>
			<if test="appKey != null">
				app_key = #{appKey},
			</if>
			<if test="appId != null">
				app_id = #{appId},
			</if>
			<if test="appSecret != null">
				app_secret = #{appSecret},
			</if>
			<if test="keyExpDate != null">
				key_exp_date = #{keyExpDate},
			</if>
			<if test="useExpDate != null">
				use_exp_date = #{useExpDate},
			</if>
			<if test="status != null">
				status = #{status},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="tenantType != null">
				tenant_type = #{tenantType},
			</if>
			update_id = #{updateId}
		</set>
		WHERE id=#{id}
	</update>

	<!--删除-->
	<delete id="delOauthKeyInfo" parameterType="map">
		UPDATE oauth_key_info SET del_flag = 1 WHERE id IN
		<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>

	<!--批量修改-->
	<update id="updateBatchOauthKeyInfo" parameterType="list">
		<foreach collection="list" item="item" index="index" open="" close="" separator=";">
			UPDATE
				oauth_key_info
			SET
				name = #{item.name},
				app_id = #{item.appId},
				app_key = #{item.appKey},
				app_secret = #{item.appSecret},
				key_exp_date = #{item.keyExpDate},
				use_exp_date = #{item.useExpDate},
				status = #{item.status},
				update_time = #{item.updateTime},
				update_id = #{item.updateId},
				tenant_type = #{item.tenantType}
			WHERE id = #{item.id}
		</foreach>
	</update>

	<!--批量修改（根据动态条件）-->
	<update id="updateBatchOauthKeyInfoBySelective" parameterType="list">
		<foreach collection="list" item="item" index="index" open="" close="" separator=";">
			UPDATE
				oauth_key_info
			<set>
				<if test="item.name != null">
					name = #{item.name},
				</if>
				<if test="item.appId != null">
					app_id = #{item.appId},
				</if>
				<if test="item.appKey != null">
					app_key = #{item.appKey},
				</if>
				<if test="item.appSecret != null">
					app_secret = #{item.appSecret},
				</if>
				<if test="item.keyExpDate!= null">
					key_exp_date = #{item.keyExpDate},
				</if>
				<if test="item.useExpDate != null">
					use_exp_date = #{item.useExpDate},
				</if>
				<if test="item.status != null">
					status = #{item.status},
				</if>
				<if test="item.updateTime != null">
					update_time = #{item.updateTime},
				</if>
				<if test="item.updateId != null">
					update_id = #{item.updateId},
				</if>
				<if test="item.tenantType != null">
					tenant_type = #{item.tenantType},
				</if>
			</set>
			WHERE id=#{item.id}
		</foreach>
	</update>
</mapper>