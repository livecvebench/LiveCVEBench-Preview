FROM jekkos/opensourcepos:3.4.1

# System dependencies required for tb framework
RUN apt-get update && apt-get install -y \
    tmux \
    asciinema \
    gcc \
    g++ \
    wget \
    curl \
    git \
    default-mysql-client \
    && rm -rf /var/lib/apt/lists/*

# Remove .git if it exists (for security)
RUN rm -rf /app/.git

WORKDIR /app

# Copy entrypoint script
COPY task-deps/entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

# Entrypoint script (handled by docker-compose command)
# CMD ["/entrypoint.sh"]
