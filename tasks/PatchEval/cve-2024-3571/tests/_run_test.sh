#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-3571:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/langchain
git apply --whitespace=nowarn /tests/test.patch 
cd ./libs/langchain && /workspace/PoC_env/CVE-2024-3571/bin/python -m pytest tests/unit_tests/storage/test_filesystem.py -v -k "test_catches_forbidden_keys" -c /dev/null
cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-3571:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/langchain
cd ./libs/langchain && /workspace/PoC_env/CVE-2024-3571/bin/python -m pytest tests/unit_tests/storage/test_filesystem.py -v -c /dev/null