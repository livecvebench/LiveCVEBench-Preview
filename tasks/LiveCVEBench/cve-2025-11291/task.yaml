instruction: |-
  This application is the IXmaps website, a platform that provides interactive
  traceroute mapping visualization. The main map page (`map.php`) allows users to
  view traceroute data by passing parameters in the URL.

  There is an issue with parameter handling in map.php. The `trid` parameter is
  supposed to accept a numeric traceroute ID, but when users accidentally include
  non-numeric characters in the URL (e.g., copy-paste errors, typos, or malformed
  links), the page outputs unexpected content that can break the JavaScript
  execution or produce confusing behavior.

  Similarly, the `data` parameter, which accepts filter data as a string, does not
  properly handle special characters like quotes or backslashes, causing the page
  JavaScript to break when these characters are present in the URL.

  Expected behavior:
  - The `trid` parameter should only accept valid numeric IDs. If non-numeric input
    is provided, the parameter should be ignored and the page should load in its
    default state.
  - The `data` parameter should properly handle all string inputs including those
    containing special characters like quotes, backslashes, and angle brackets.
    The data should be safely embedded in the JavaScript context without breaking
    syntax.

author_name: HIT-SCIR-LACG
author_email: xzluo@ir.hit.edu.cn

difficulty: medium
category: bug-fix
tags:
  - php
  - input-validation
  - javascript
  - web
parser_name: pytest

run_tests_in_same_shell: false
