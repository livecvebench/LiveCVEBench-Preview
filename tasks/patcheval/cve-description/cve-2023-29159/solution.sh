cat <<'EOF' > fix.patch
diff --git a/starlette/staticfiles.py b/starlette/staticfiles.py
index 4d075b3ed..4c856063c 100644
--- a/starlette/staticfiles.py
+++ b/starlette/staticfiles.py
@@ -169,7 +169,7 @@ def lookup_path(
             else:
                 full_path = os.path.realpath(joined_path)
             directory = os.path.realpath(directory)
-            if os.path.commonprefix([full_path, directory]) != directory:
+            if os.path.commonpath([full_path, directory]) != directory:
                 # Don't allow misbehaving clients to break out of the static files
                 # directory.
                 continue


EOF

cd /app/starlette
git apply --whitespace=nowarn  /app/fix.patch