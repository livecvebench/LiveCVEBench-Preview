instruction: |-
  This application provides a web server interface library that handles HTTP
  request parsing, including form data from POST requests.

  When processing form data with large request bodies (e.g., bodies exceeding
  a few megabytes), the server reads the entire body into memory before any
  validation occurs. This causes excessive memory consumption and can lead to
  the server becoming unresponsive or crashing with out-of-memory errors.

  For example, when a client sends a POST request with Content-Type
  "application/x-www-form-urlencoded" and a body of 10MB or more, the server
  attempts to load all of it into memory at once. The existing size limit
  configuration (4MB by default) is only checked after the data has already
  been fully read.

  We expect the server to limit how much data it reads from the request body
  before performing validation, so that oversized requests are rejected without
  consuming excessive memory.

author_name: HIT-SCIR-LACG
author_email: xzluo@ir.hit.edu.cn

difficulty: medium
category: bug-fix
tags:
  - ruby
  - web-server
  - resource-management
  - memory
parser_name: pytest

run_tests_in_same_shell: false
