#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-40267:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/GitPython
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2023-40267/bin/python  -m pytest test/test_repo.py::TestRepo::test_clone_unsafe_options  test/test_repo.py::TestRepo::test_clone_from_unsafe_options -v

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-40267:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/GitPython
/workspace/PoC_env/CVE-2023-40267/bin/python  -m pytest test/test_repo.py -v -k "not test_archive and not test_clone_from_with_path_contains_unicode and not test_commit_from_revision and not test_commits and not test_creation_deletion and not test_do_not_strip_newline_in_stdout and not test_is_ancestor and not test_is_valid_object and not test_merge_base and not test_rebasing and not test_remote_method and not test_repo_creation_from_different_paths and not test_repo_creation_pathlib and not test_rev_parse and not test_submodule_update and not test_submodules and not test_tag and not test_tree_from_revision and not test_trees" -p no:warning --disable-warnings
