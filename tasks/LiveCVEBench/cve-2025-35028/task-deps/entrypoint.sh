#!/bin/bash
# Entrypoint script for HexStrike server
# Wraps the service in a restart loop so the container stays running when solution.sh restarts the process

# Trap SIGTERM and SIGINT to allow graceful shutdown
trap 'exit 0' SIGTERM SIGINT

while true; do
    echo "[entrypoint] Starting HexStrike server..."
    python3 /app/hexstrike_server.py
    exit_code=$?
    echo "[entrypoint] HexStrike server exited with code $exit_code"
    echo "[entrypoint] Restarting in 2 seconds..."
    sleep 2
done
