instruction: |-
  This application is wasm3, a high-performance WebAssembly interpreter designed for
  embedded systems and constrained environments.

  When processing certain WebAssembly modules with unusual control flow patterns,
  the interpreter crashes with a segmentation fault during compilation. The crash
  occurs in the slot allocation tracking code.

  When running wasm3 with AddressSanitizer enabled, the crash produces output like:

    AddressSanitizer: SEGV on unknown address
    #0 MarkSlotAllocated source/m3_compile.c
    #1 MarkSlotsAllocated source/m3_compile.c
    #2 MarkSlotsAllocatedByType source/m3_compile.c
    #3 CompileBlock source/m3_compile.c

  The issue seems related to how the compiler handles slot indices when restoring
  block parameters in certain stack states. We expect the interpreter to handle
  such modules gracefully (either process them correctly or report an appropriate
  error) without crashing.

author_name: HIT-SCIR-LACG
author_email: xzluo@ir.hit.edu.cn

difficulty: medium
category: bug-fix
tags:
  - c
  - memory-safety
  - wasm
  - bounds-check
parser_name: pytest

run_tests_in_same_shell: false
