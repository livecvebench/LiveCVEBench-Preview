cat <<'EOF' > /workspace/fix.patch
diff --git a/lib/hide-sensitive.js b/lib/hide-sensitive.js
index 60984962c9..d612068b26 100644
--- a/lib/hide-sensitive.js
+++ b/lib/hide-sensitive.js
@@ -11,7 +11,12 @@ module.exports = (env) => {
     return /token|password|credential|secret|private/i.test(envVar) && size(env[envVar].trim()) >= SECRET_MIN_SIZE;
   });
 
-  const regexp = new RegExp(toReplace.map((envVar) => escapeRegExp(env[envVar])).join('|'), 'g');
+  const regexp = new RegExp(
+    toReplace
+      .map((envVar) => `${escapeRegExp(env[envVar])}|${encodeURI(escapeRegExp(env[envVar]))}`)
+      .join('|'),
+    'g'
+  );
   return (output) =>
     output && isString(output) && toReplace.length > 0 ? output.toString().replace(regexp, SECRET_REPLACEMENT) : output;
 };


EOF

cd /workspace/semantic-release
git apply --whitespace=nowarn  /workspace/fix.patch