"""
NiceGUI Media Server Application

A simple NiceGUI application that serves media files through
a streaming endpoint. Supports HTTP range requests for video/audio streaming.

Usage:
    python poc.py

The application serves files from the /media endpoint.
"""
from pathlib import Path
from nicegui import app, ui

# Create media directory
MEDIA_DIR = Path(__file__).parent / 'media'
MEDIA_DIR.mkdir(exist_ok=True)

# Create a sample file in the media directory
(MEDIA_DIR / 'test.txt').write_text('This is a test media file.')

# Set up media file serving endpoint
app.add_media_files('/media', MEDIA_DIR)

@ui.page('/')
def index():
    ui.label('NiceGUI Media Server')
    ui.label('Streaming media files from /media endpoint')
    ui.markdown('''
    **Available endpoints:**
    - `/` - This page
    - `/media/<filename>` - Access media files
    ''')

if __name__ in {'__main__', '__mp_main__'}:
    ui.run(port=8080, reload=False)
