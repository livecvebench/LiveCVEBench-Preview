<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.LcFormFieldDao">
	<!--初始化分页-->
	<select id="getLcFormFieldListByCondition" resultType="jehc.djshi.workflow.model.LcFormField" parameterType="map">
		SELECT
			lc_form_field.id,
			lc_form_field.field_label AS fieldLabel,
			lc_form_field.field_id AS fieldId,
			lc_form_field.field_name AS fieldName,
			lc_form_field.field_read AS fieldRead,
			lc_form_field.field_write AS fieldWrite,
			lc_form_field.filed_hide AS filedHide,
			lc_form_field.filed_required AS filedRequired,
			lc_form_field.create_id AS createId,
			lc_form_field.update_id AS updateId,
			lc_form_field.create_time AS createTime,
			lc_form_field.update_time AS updateTime,
			lc_form_field.field_maxlength AS fieldMaxlength,
			lc_form_field.field_type_id AS fieldTypeId,
			lc_form_field.field_html_id AS fieldHtmlId,
			lc_form_field.sort_,
			lc_form_field.participation,
			lc_form_field.tips,
			lc_form_field.lc_form_id AS lcFormId,
			lc_field_type.name AS typeName,
			lc_field_html.name AS htmlName
		FROM 
			lc_form_field lc_form_field LEFT JOIN lc_field_type lc_field_type ON lc_field_type.id = lc_form_field.field_type_id
			LEFT JOIN lc_field_html lc_field_html ON lc_form_field.field_html_id = lc_field_html.id
		WHERE 1=1
			<if test="null != lcFormId">
				AND lc_form_field.lc_form_id = #{lcFormId}
			</if>
			<if test="null != fieldName">
				AND lc_form_field.field_name LIKE CONCAT(CONCAT('%',#{fieldName}),'%')
			</if>
			<if test="null != fieldLabel">
				AND lc_form_field.field_label LIKE CONCAT(CONCAT('%',#{fieldLabel}),'%')
			</if>
			<if test="null != participation">
				AND lc_form_field.participation = #{participation}
			</if>
			<if test="null != fieldId">
				AND lc_form_field.field_id = #{fieldId}
			</if>
			<if test="null != id">
				AND lc_form_field.id IN
				<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
					#{item}
				</foreach>
			</if>
			AND lc_form_field.del_flag = 0
			ORDER BY lc_form_field.sort_ ASC
	</select>

	<!--查询对象-->
	<select id="getLcFormFieldById" resultType="jehc.djshi.workflow.model.LcFormField" parameterType="string">
		SELECT
			lc_form_field.id,
			lc_form_field.field_label AS fieldLabel,
			lc_form_field.field_id AS fieldId,
			lc_form_field.field_name AS fieldName,
			lc_form_field.field_read AS fieldRead,
			lc_form_field.field_write AS fieldWrite,
			lc_form_field.filed_hide AS filedHide,
			lc_form_field.filed_required AS filedRequired,
			lc_form_field.create_id AS createId,
			lc_form_field.update_id AS updateId,
			lc_form_field.create_time AS createTime,
			lc_form_field.update_time AS updateTime,
			lc_form_field.field_maxlength AS fieldMaxlength,
			lc_form_field.field_type_id AS fieldTypeId,
			lc_form_field.field_html_id AS fieldHtmlId,
			lc_form_field.sort_,
			lc_form_field.participation,
			lc_form_field.tips,
			lc_form_field.lc_form_id AS lcFormId,
			lc_field_type.name AS typeName,
			lc_field_html.name AS htmlName
		FROM
			lc_form_field lc_form_field LEFT JOIN lc_field_type lc_field_type ON lc_field_type.id = lc_form_field.field_type_id
			LEFT JOIN lc_field_html lc_field_html ON lc_form_field.field_html_id = lc_field_html.id
		WHERE lc_form_field.id=#{id}
	</select>

	<!--添加-->
	<insert id="addLcFormField" parameterType="jehc.djshi.workflow.model.LcFormField">
		INSERT INTO
			lc_form_field
			(
			id,
			field_label,
			field_id,
			field_name,
			field_read,
			field_write,
			filed_hide,
			filed_required,
			create_id,
			update_id,
			del_flag,
			create_time,
			update_time,
			field_maxlength,
			field_type_id,
			field_html_id,
			sort_,
			participation,
			tips,
			lc_form_id
			)
			VALUES
			(
			#{id},
			#{fieldLabel},
			#{fieldId},
			#{fieldName},
			#{fieldRead},
			#{fieldWrite},
			#{filedHide},
			#{filedRequired},
			#{createId},
			#{updateId},
			0,
			#{createTime},
			#{updateTime},
			#{fieldMaxlength},
			#{fieldTypeId},
			#{fieldHtmlId},
			#{sort_},
			#{participation},
			#{tips},
			#{lcFormId}
			)
	</insert>

	<!--修改-->
	<update id="updateLcFormField" parameterType="jehc.djshi.workflow.model.LcFormField">
		UPDATE
			lc_form_field
		SET
			field_label = #{fieldLabel},
			field_id = #{fieldId},
			field_name = #{fieldName},
			field_read = #{fieldRead},
			field_write = #{fieldWrite},
			filed_hide = #{filedHide},
			filed_required = #{filedRequired},
			update_id = #{updateId},
			update_time = #{updateTime},
			field_maxlength = #{fieldMaxlength},
			field_type_id = #{fieldTypeId},
			field_html_id = #{fieldHtmlId},
			sort_ = #{sort_},
			participation = #{participation},
			tips = #{tips},
			lc_form_id = #{lcFormId}
		WHERE id=#{id}
	</update>

	<!--修改（根据动态条件）-->
	<update id="updateLcFormFieldBySelective" parameterType="jehc.djshi.workflow.model.LcFormField">
		UPDATE
			lc_form_field
		<set>
			<if test="fieldLabel != null">
				field_label = #{fieldLabel},
			</if>
			<if test="fieldId != null">
				field_id = #{fieldId},
			</if>
			<if test="fieldName != null">
				field_name = #{fieldName},
			</if>
			<if test="fieldRead != null">
				field_read = #{fieldRead},
			</if>
			<if test="fieldWrite != null">
				field_write = #{fieldWrite},
			</if>
			<if test="filedHide != null">
				filed_hide = #{filedHide},
			</if>
			<if test="filedRequired != null">
				filed_required = #{filedRequired},
			</if>
			<if test="updateId != null">
				update_id = #{updateId},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="fieldMaxlength != null">
				field_maxlength = #{fieldMaxlength},
			</if>
			<if test="fieldTypeId != null">
				field_type_id = #{fieldTypeId},
			</if>
			<if test="fieldHtmlId != null">
				field_html_id = #{fieldHtmlId},
			</if>
			<if test="sort_ != null">
				sort_ = #{sort_},
			</if>
			<if test="participation != null">
				participation = #{participation},
			</if>
			<if test="tips != null">
				tips = #{tips},
			</if>
			<if test="lcFormId != null">
				lc_form_id = #{lcFormId},
			</if>
		</set>
		WHERE id=#{id}
	</update>

	<!--删除-->
	<delete id="delLcFormField" parameterType="map">
		UPDATE lc_form_field SET del_flag = 1 WHERE id IN
		<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
</mapper>