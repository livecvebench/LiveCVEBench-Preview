server:
  port: 8082
spring:
  application:
    name: jehc-api
  main:
    allow-bean-definition-overriding: true #当遇到同样名字的时候，是否允许覆盖注册
  datasource:
    initialization-mode: always #设置系统启动时自动建立Activiti表(Springboot1.x的版本中不需要做此设置)  always为始终执行初始化,embedded只初始化内存数据库(默认值),如h2等,never为不执行初始化.
  activiti:
    database-schema-update: true #自动生成表
    check-process-definitions: false #Activiti自动部署验证设置,:true-开启(默认)、false-关闭
    async-executor-enabled: true #设置true后将代替那些老的Job executor
    job-executor-activate: false #Activiti定时扫描任务,默认:true(开启),不使用的话建议关掉,需要和spring.activiti.async-executor-enabled=false配合使用,否则不起作用
    mail-server-host: smtp.qq.com # QQ邮箱的 SMTP 服务器
    mail-server-port: 465 # 邮箱的端口
    mail-server-use-ssl: true # 使用SSL端口
    mail-server-default-from: XXXX@qq.com # 默认邮件发送地址，当工作流没有设置来自（邮件发送地址），会使用此地址
    mail-server-user-name: XXX@qq.com # 邮件发送用户名
    mail-server-password: XXXXXXX # 开启邮箱的授权码(写自己QQ邮箱授权码)
  session:
    store-type: none  #屏蔽Redis自行启动
  redis: #redis配置信息
    host: 127.0.0.1 #redis服务器地址
    port: 6379 #redis端口
    password: #redis密码
    timeout: 5000 #客户端超时时间单位是毫秒 默认是2000
    maxIdle: 20 #最大空闲数
    maxActive: -1 #连接池的最大数据库连接数
    maxTotal: 100 #控制一个pool可分配多少个jedis实例,用来替换上面的maxActive
    maxWaitMillis: 100 #最大建立连接等待时间。如果超过此时间将接到异常
    minEvictableIdleTimeMillis: 864000000 #连接的最小空闲时间
    numTestsPerEvictionRun: 10 #每次释放连接的最大数目
    timeBetweenEvictionRunsMillis: 300000 #逐出扫描的时间间隔(毫秒) 如果为负数,则不运行逐出线程
    testOnBorrow: true #是否在从池中取出连接前进行检验,如果检验失败,则从池中去除连接并尝试取出另一个
    testWhileIdle: false #在空闲时检查有效性
    database: 0 #数据库

#日志配置
logging:
  config: classpath:config/logback.xml

#mybatis
mybatis:
  typeAliasesPackage: jehc.djshi.*.model
  mapperLocations: classpath*:jehc/djshi/*/dao/mapper/*.xml
  configLocation: classpath:/config/mybatis/mybatis.xml
  configuration-properties:
      offsetAsPageNum: true
      rowBoundsWithCount: true
      reasonable: true

#系统秘钥
jehc.cloud.key: k8slp3Y0_pdB8rNNeok4DbNugxB1MM9bVQzYrCcF8zQ
jehc.cloud.security: eyJpYXQiOjE1NjE2OTU5NzMsInN1YiI6IntcImNsaWVudGlkXCI6XCIwNmU0MDc1ZTAwYTg0MWM4YTE0ZmVmOTJlMGUwMDdmNlwifSIsImV4cCI6MTU2MTY5Nzc3M30


#客户端定时配置
jehc.djshi.job.clientId: oauth-job-client-1001
jehc.djshi.job.clientGroupId: oauth-job-client-group-1001
jehc.djshi.job.host: 127.0.0.1
jehc.djshi.job.port: 9099

#授权中心TCP Server配置
jehc.oauth.serverHost: 127.0.0.1
jehc.oauth.serverPort: 22088
jehc.oauth.serverId: oauthServer
jehc.oauth.serverGroupId: oauthServer

management:
  endpoints:
    web:
      exposure:
        include: '*'


##MYSQL连接配置开始
##默认统一用户名 密码 URL Driver配置（包含DBMSMetaUtil,BoneCP,FlexSearch中jdbc等使用模块）注：该配置为主数据库
master.driverClassName: com.mysql.jdbc.Driver
master.url: jdbc:mysql://localhost:3306/jehc-2.0-workflow?useOldAliasMetadataBehavior=true&amp;useUnicode=true&amp;characterEncoding=utf8&allowMultiQueries=true
master.username: root
master.password: 123456

ip: 127.0.0.1
port: 3306
dbname: jehc-2.0-workflow
databasetype: mysql

#从库即读写分离中”读“采用
slave.driverClassName: com.mysql.jdbc.Driver
slave.url: jdbc:mysql://localhost:3306/jehc-2.0-workflow?useOldAliasMetadataBehavior=true&amp;useUnicode=true&amp;characterEncoding=utf8&allowMultiQueries=true
slave.username: root
slave.password: 123456
slave.ip: 127.0.0.1
slave.port: 3306
slave.dbname: jehc-2.0-workflow
slave.databasetype: mysql

##测试数据源
jehc.driverClassTest: com.mysql.jdbc.Driver
jehc.urlTest: jdbc:mysql://localhost:3306/jehc-2.0-workflow?useOldAliasMetadataBehavior=true&amp;useUnicode=true&amp;characterEncoding=utf8&allowMultiQueries=true
jehc.usernameTest: root
jehc.passwordTest: 123456
#MYSQL连接配置结束

##Druid连接配置
jehc.filters: stat,slf4j
jehc.maxActive: 5
jehc.initialSize: 2
jehc.maxWait: 60000
jehc.minIdle: 1
jehc.timeBetweenEvictionRunsMillis: 60000
jehc.minEvictableIdleTimeMillis: 300000
jehc.testWhileIdle: true
jehc.testOnBorrow: false
jehc.testOnReturn: false
jehc.poolPreparedStatements: true
jehc.maxOpenPreparedStatements: 20

jehc.maxEvictableIdleTimeMillis: 900000 #配置一个连接在池中最大生存的时间，单位是毫秒
jehc.datasource.type: com.alibaba.druid.pool.DruidDataSource
jehc.datasource.driverClassName: com.mysql.jdbc.Driver
jehc.maxPoolPreparedStatementPerConnectionSize: 20
jehc.validationQuery: SELECT 'x' #配置检测连接是否有效
jehc.connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000 #通过connectProperties属性来打开mergeSql功能；慢SQL记录
jehc.allow: "" #统计白名单
jehc.deny: "" #统计黑名单
jehc.loginUsername: druid #统计账号
jehc.loginPassword: 123456 #统计密码
jehc.resetEnable: false #是否能够重置数据
jehc.exclusions: "*.js,*.gif,*.jpg,*.png,*.css,*.ico,/monitor/druid/*" #忽略的资源
jehc.mergeSql: true #是否打开慢sql记录
jehc.slowSqlMillis: 1000 #慢sql记录时间
jehc.logSlowSql: true #sql记录日志


#minIO 地址
minio.endpoint: http://49.233.42.58
minio.port: 9000
minio.accessKey: admin
minio.secretKey: admin
minio.bucketName: iletter
minio.secure: false
minio.configDir: /opt/file/

#Office配置
jehc.office.home: D://LibreOffice
jehc.office.ports: 2005,2006
jehc.office.maxTasksPerProcess: 100
jehc.office.processTimeout: 120000
jehc.office.taskQueueTimeout: 30000
jehc.office.taskExecutionTimeout: 120000

#上传文件大小限定
spring.servlet.multipart.maxFileSize: 100MB
spring.servlet.multipart.maxRequestSize: 120MB

#邮箱配置
jehc.mail.host: smtp.qq.com
jehc.mail.userName: XXXX.com
jehc.mail.password: XXXX
jehc.mail.port: 465
jehc.mail.smtp.auth: false
jehc.mail.smtp.ssl.enable: false

#WEB应用服务监控SDK配置
jehc:
  omp:
    actuator:
      log:
        path: D://logs/jehc/${spring.application.name}.log
      client:
        uri:
          hasPrefixApplicationName: false
          clientHttpPrefix: http
          keepTimes: 300000
          enabled: true
          address: http://localhost:8082