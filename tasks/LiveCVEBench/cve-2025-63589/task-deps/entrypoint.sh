#!/bin/bash

# Entrypoint script for CMSimple_XH vulnerable application
# This script wraps the PHP built-in server in a restart loop
# to allow solution.sh to restart the service after applying fixes

cd /app

while true; do
    echo "[entrypoint] Starting PHP built-in server on port 8080..."
    php -S 0.0.0.0:8080

    exit_code=$?
    echo "[entrypoint] PHP server exited with code $exit_code. Restarting in 1 second..."
    sleep 1
done
