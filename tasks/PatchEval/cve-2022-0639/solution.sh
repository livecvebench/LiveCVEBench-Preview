cat <<'EOF' > /workspace/fix.patch
diff --git a/index.js b/index.js
index 517b6b6..d808b13 100644
--- a/index.js
+++ b/index.js
@@ -539,6 +539,17 @@ function toString(stringify) {
   } else if (url.password) {
     result += ':'+ url.password;
     result += '@';
+  } else if (
+    url.protocol !== 'file:' &&
+    isSpecial(url.protocol) &&
+    !url.host &&
+    url.pathname !== '/'
+  ) {
+    //
+    // Add back the empty userinfo, otherwise the original invalid URL
+    // might be transformed into a valid one with `url.pathname` as host.
+    //
+    result += '@';
   }
 
   result += url.host + url.pathname;
   

EOF

cd /workspace/url-parse
git apply --whitespace=nowarn  /workspace/fix.patch