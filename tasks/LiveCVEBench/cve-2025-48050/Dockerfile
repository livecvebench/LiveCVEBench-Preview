FROM node:18-slim

WORKDIR /app

# System dependencies (tmux, asciinema, curl are required)
RUN apt-get update && apt-get install -y git tmux asciinema curl netcat-openbsd procps psmisc && rm -rf /var/lib/apt/lists/*

# Get source code and remove git history
RUN git clone --depth 1 --branch 3.2.5 https://github.com/cure53/DOMPurify.git . && rm -rf .git

# Default command to start the vulnerable server
# CMD 