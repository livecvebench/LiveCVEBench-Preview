#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2019-7539:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/ipycache
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2019-7539/bin/python -m pytest test_ipycache.py -v -k "test_load_exploitPickle"  -p no:warning --disable-warnings

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2019-7539:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/ipycache
/workspace/PoC_env/CVE-2019-7539/bin/python -m pytest test_ipycache.py -v -k "(test_conditional_eval) or (test_clean_var) or (test_clean_vars) or (test_do_save) or (test_load_fail) or (test_cache_outputs) or (test_cache_fail_1)" -p no:warning --disable-warnings
