<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.file.dao.XtAttachmentDao">
	<!--初始化分页-->
	<select id="getXtAttachmentListByCondition" resultType="jehc.djshi.file.model.XtAttachment" parameterType="map">
		SELECT
			xt_attachment.id,
			xt_attachment.type,
			xt_attachment.create_time AS createTime,
			xt_attachment.size,
			xt_attachment.path,
			xt_attachment.name,
			xt_attachment.create_id AS createId,
			xt_attachment.modules_id AS modulesId,
			xt_attachment.modules_order AS modulesOrder,
			xt_attachment.title,
			xt_attachment.path_absolutek AS pathAbsolutek,
			xt_attachment.path_urlk AS pathUrlk,
			xt_attachment.path_relativek AS pathRelativek
		FROM 
			xt_attachment xt_attachment
		WHERE 1=1
		<if test="null != title">
			AND xt_attachment.title = #{title}
		</if>
		<if test="null != uploadSt and uploadSt != ''">
			AND xt_attachment.create_time &gt;= #{uploadSt}
		</if>
		<if test="null != uploadEt and uploadEt != ''">
			AND xt_attachment.create_time &lt;= #{uploadEt}
		</if>
	</select>

	<!--查询对象-->
	<select id="getXtAttachmentById" resultType="jehc.djshi.file.model.XtAttachment" parameterType="string">
		SELECT
			xt_attachment.id,
			xt_attachment.type,
			xt_attachment.create_time AS createTime,
			xt_attachment.size,
			xt_attachment.path,
			xt_attachment.name,
			xt_attachment.create_id AS createId,
			xt_attachment.modules_id AS modulesId,
			xt_attachment.modules_order AS modulesOrder,
			xt_attachment.title,
			xt_attachment.path_absolutek AS pathAbsolutek,
			xt_attachment.path_urlk AS pathUrlk,
			xt_attachment.path_relativek AS pathRelativek
		FROM 
			xt_attachment xt_attachment
		WHERE id=#{id}
	</select>

	<!--添加-->
	<insert id="addXtAttachment" parameterType="jehc.djshi.file.model.XtAttachment">
		INSERT INTO
			xt_attachment
			(
			id,
			type,
			create_time,
			size,
			path,
			del_flag,
			name,
			create_id,
			modules_id,
			modules_order,
			title,
			path_absolutek,
			path_relativek,
			path_urlk
			)
			VALUES
			(
			#{id},
			#{type},
			#{createTime},
			#{size},
			#{path},
			0,
			#{name},
			#{createId},
			#{modulesId},
			#{modulesOrder},
			#{title},
			#{pathAbsolutek},
			#{pathRelativek},
			#{pathUrlk}
			)
	</insert>

	<!--删除-->
	<delete id="delXtAttachment" parameterType="map">
		DELETE FROM xt_attachment WHERE id IN
		<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
	
	<!-- 根据如编号数组批量查询集合 -->
	<select id="getXtAttachmentList" resultType="jehc.djshi.file.model.XtAttachment" parameterType="map">
		SELECT
			xt_attachment.id,
			xt_attachment.type,
			xt_attachment.create_time AS createTime,
			xt_attachment.size,
			xt_attachment.path,
			xt_attachment.name,
			xt_attachment.create_id AS createId,
			xt_attachment.modules_id AS modulesId,
			xt_attachment.modules_order AS modulesOrder,
			xt_attachment.title,
			xt_attachment.path_absolutek AS pathAbsolutek,
			xt_attachment.path_urlk AS pathUrlk,
			xt_attachment.path_relativek AS pathRelativek
		FROM 
			xt_attachment xt_attachment
		WHERE 1=1
		<if test="null != id">
			AND id IN
			<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
	</select>

	<!--批量添加-->
	<insert id="addBatchXtAttachment" parameterType="list">
		INSERT INTO
		xt_attachment
		(
		id,
		type,
		create_time,
		size,
		path,
		del_flag,
		name,
		create_id,
		modules_id,
		modules_order,
		title,
		path_absolutek,
		path_relativek,
		path_urlk
		)
		VALUES
		<foreach collection="list" item="item" index="index" separator=",">
			(
			#{item.id},
			#{item.type},
			#{item.createTime},
			#{item.size},
			#{item.path},
			0,
			#{item.name},
			#{item.createId},
			#{item.modulesId},
			#{item.modulesOrder},
			#{item.title},
			#{item.pathAbsolutek},
			#{item.pathRelativek},
			#{item.pathUrlk}
			)
		</foreach>
	</insert>
</mapper>