<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.oauth.dao.OauthAdminDao">

    <!--初始化分页-->
    <select id="getOauthAdminList" resultType="jehc.djshi.oauth.model.OauthAdmin" parameterType="map">
        SELECT
            id,
            account_id AS accountId,
            level,
            account
        FROM
            oauth_admin
        WHERE  1=1
        <if test="null != accountId">
           AND account_id = #{accountId}
        </if>
    </select>

    <!--添加-->
    <insert id="addOauthAdmin" parameterType="jehc.djshi.oauth.model.OauthAdmin">
        INSERT INTO
        oauth_admin
        (
        id,
        account_id,
        level,
        account
        )
        VALUES
        (
        #{id},
        #{accountId},
        #{level},
        #{account}
        )
    </insert>

    <!-- 查找所有分配管理员列表 -->
    <select id="getOauthAdminListAll" resultType="jehc.djshi.oauth.model.OauthAdmin" parameterType="map">
        SELECT
            oauth_admin.id,
            oauth_admin.account_id AS accountId,
            oauth_admin.level,
            oauth_account.name,
            oauth_account.account,
            oauth_account.status,
            oauth_account.email,
            oauth_account.create_time AS createTime,
            oauth_account.update_time AS updateTime,
            oauth_account.last_login_time AS lastLoginTime
        FROM
          oauth_admin oauth_admin LEFT JOIN oauth_admin_sys oauth_admin_sys ON oauth_admin.id = oauth_admin_sys.admin_id
          LEFT JOIN oauth_account oauth_account ON oauth_account.id = oauth_admin.account_id
        WHERE
          oauth_admin_sys.sys_mode_id = #{sysModeId}
    </select>

    <!-- 删除 -->
    <delete id="delOauthAdmin" parameterType="string">
        DELETE FROM oauth_admin WHERE id = #{id}
    </delete>
</mapper>