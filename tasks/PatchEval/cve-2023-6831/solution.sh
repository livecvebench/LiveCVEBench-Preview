cat <<'EOF' > /workspace/fix.patch
diff --git a/mlflow/utils/uri.py b/mlflow/utils/uri.py
index 331648b8e4c3f..ecaa228c731ac 100644
--- a/mlflow/utils/uri.py
+++ b/mlflow/utils/uri.py
@@ -430,7 +430,10 @@ def validate_path_is_safe(path):
     """
     from mlflow.utils.file_utils import local_file_uri_to_path
 
-    exc = MlflowException(f"Invalid path: {path}", error_code=INVALID_PARAMETER_VALUE)
+    # We must decode URL before validating it
+    path = urllib.parse.unquote(path)
+
+    exc = MlflowException("Invalid path", error_code=INVALID_PARAMETER_VALUE)
     if any((s in path) for s in ("#", "%23")):
         raise exc
 


EOF

cd /workspace/mlflow
git apply --whitespace=nowarn  /workspace/fix.patch