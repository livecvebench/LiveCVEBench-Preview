-- Minimal database schema for CVE-2025-11661 testing
-- Based on ProjectsAndPrograms/school-management-system

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";

-- --------------------------------------------------------
-- Table structure for table `users`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `users` (
  `s_no` int(15) NOT NULL AUTO_INCREMENT,
  `id` varchar(40) NOT NULL,
  `email` varchar(256) NOT NULL,
  `password_hash` varchar(700) NOT NULL,
  `role` varchar(20) NOT NULL,
  `theme` varchar(20) NOT NULL DEFAULT 'light',
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Default users (password is "123" for all)
INSERT INTO `users` (`s_no`, `id`, `email`, `password_hash`, `role`, `theme`) VALUES
(1, 'A9876543210', 'admin@gmail.com', '$2y$10$TKh8H1.PfQx37YgCzwiKb.KjNyWgaHb9cbcoQgdIVFlYg7B77UdFm', 'admin', 'light'),
(2, 'T1718791191', 'teacher@gmail.com', '$2y$10$TKh8H1.PfQx37YgCzwiKb.KjNyWgaHb9cbcoQgdIVFlYg7B77UdFm', 'teacher', 'light'),
(3, 'S1718791292', 'student@gmail.com', '$2y$10$TKh8H1.PfQx37YgCzwiKb.KjNyWgaHb9cbcoQgdIVFlYg7B77UdFm', 'student', 'light');

-- --------------------------------------------------------
-- Table structure for table `subjects`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `subjects` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `subject_id` varchar(40) NOT NULL,
  `subject_name` varchar(100) NOT NULL,
  `class` varchar(50) NOT NULL,
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Sample subjects for testing
INSERT INTO `subjects` (`s_no`, `subject_id`, `subject_name`, `class`) VALUES
(1, '12c6672ac911a253', 'Hindi', '12c'),
(2, '12c6672ac9c45d68', 'Commerce', '12c'),
(3, '12c6672aca78c3c7', 'English', '12c');

-- --------------------------------------------------------
-- Table structure for table `students`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `students` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `id` varchar(40) NOT NULL,
  `fname` varchar(100) NOT NULL,
  `lname` varchar(100) NOT NULL,
  `father` varchar(200) NOT NULL,
  `gender` varchar(10) NOT NULL,
  `class` varchar(20) NOT NULL,
  `section` varchar(50) NOT NULL,
  `dob` varchar(15) NOT NULL,
  `image` varchar(50) NOT NULL DEFAULT '1701517055user.png',
  `phone` varchar(15) NOT NULL,
  `email` varchar(100) NOT NULL,
  `address` varchar(200) NOT NULL,
  `city` varchar(50) NOT NULL,
  `zip` varchar(20) NOT NULL,
  `state` varchar(50) NOT NULL,
  `request_date` varchar(30) NOT NULL DEFAULT '',
  `request_time` varchar(30) NOT NULL DEFAULT '',
  `request` varchar(20) NOT NULL DEFAULT '',
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `students` (`s_no`, `id`, `fname`, `lname`, `father`, `gender`, `class`, `section`, `dob`, `image`, `phone`, `email`, `address`, `city`, `zip`, `state`) VALUES
(1, 'S1718791292', 'Student', 'Kumar', 'Father G', 'Male', '12c', 'A', '19-06-2024', '1701517055user.png', '7894561230', 'student@gmail.com', 'Test Address', 'Test City', '789654', 'Punjab');

-- --------------------------------------------------------
-- Table structure for table `student_guardian`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `student_guardian` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `id` varchar(40) NOT NULL,
  `gname` varchar(200) NOT NULL,
  `gphone` varchar(20) NOT NULL,
  `gaddress` varchar(200) NOT NULL,
  `gcity` varchar(100) NOT NULL,
  `gzip` varchar(50) NOT NULL,
  `relation` varchar(256) NOT NULL,
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `student_guardian` (`s_no`, `id`, `gname`, `gphone`, `gaddress`, `gcity`, `gzip`, `relation`) VALUES
(1, 'S1718791292', 'Guardian Name', '4567894562', 'Guardian Address', 'Guardian City', '123456', 'Father');

-- --------------------------------------------------------
-- Table structure for table `teachers`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `teachers` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `id` varchar(40) NOT NULL,
  `fname` varchar(100) NOT NULL,
  `lname` varchar(100) NOT NULL,
  `father` varchar(150) NOT NULL DEFAULT '',
  `subject` varchar(50) NOT NULL,
  `gender` varchar(10) NOT NULL,
  `dob` varchar(20) NOT NULL,
  `image` varchar(30) NOT NULL DEFAULT '1701517055user.png',
  `phone` varchar(20) NOT NULL,
  `email` varchar(50) NOT NULL,
  `address` varchar(512) NOT NULL,
  `city` varchar(50) NOT NULL,
  `zip` varchar(20) NOT NULL,
  `state` varchar(50) NOT NULL,
  `class` varchar(20) NOT NULL,
  `section` varchar(20) NOT NULL,
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `teachers` (`s_no`, `id`, `fname`, `lname`, `subject`, `gender`, `dob`, `phone`, `email`, `address`, `city`, `zip`, `state`, `class`, `section`) VALUES
(1, 'T1718791191', 'Teacher', 'Kumar', 'Hindi', 'Male', '19-06-2000', '7897897897', 'teacher@gmail.com', 'Test Address', 'Test City', '789654', 'Punjab', '12c', 'A');

-- --------------------------------------------------------
-- Table structure for table `teacher_guardian`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `teacher_guardian` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `id` varchar(40) NOT NULL,
  `gname` varchar(200) NOT NULL,
  `gphone` varchar(20) NOT NULL,
  `gaddress` varchar(200) NOT NULL,
  `gcity` varchar(100) NOT NULL,
  `gzip` varchar(50) NOT NULL,
  `relation` varchar(256) NOT NULL,
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `teacher_guardian` (`s_no`, `id`, `gname`, `gphone`, `gaddress`, `gcity`, `gzip`, `relation`) VALUES
(1, 'T1718791191', 'Guardian Name', '9876543210', 'Guardian Address', 'Guardian City', '123456', 'Father');

-- --------------------------------------------------------
-- Table structure for table `admins`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `admins` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `id` varchar(30) NOT NULL,
  `fname` varchar(100) NOT NULL,
  `lname` varchar(100) NOT NULL,
  `dob` varchar(20) NOT NULL,
  `image` varchar(40) NOT NULL DEFAULT '1701517055user.png',
  `phone` varchar(20) NOT NULL,
  `gender` varchar(20) NOT NULL,
  `address` varchar(700) NOT NULL,
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `admins` (`s_no`, `id`, `fname`, `lname`, `dob`, `phone`, `gender`, `address`) VALUES
(1, 'A9876543210', 'Admin', 'Kumar', '12/11/2000', '1234567890', 'male', 'Admin Address');

-- --------------------------------------------------------
-- Table structure for table `notice`
-- --------------------------------------------------------

CREATE TABLE IF NOT EXISTS `notice` (
  `s_no` int(20) NOT NULL AUTO_INCREMENT,
  `sender_id` varchar(40) NOT NULL,
  `editor_id` varchar(40) NOT NULL,
  `title` varchar(100) NOT NULL,
  `body` varchar(1000) NOT NULL,
  `file` varchar(100) NOT NULL DEFAULT '',
  `importance` varchar(5) NOT NULL DEFAULT '1',
  `timestamp` datetime NOT NULL DEFAULT current_timestamp(),
  `role` varchar(11) NOT NULL DEFAULT '',
  `class` varchar(11) NOT NULL DEFAULT '',
  PRIMARY KEY (`s_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `notice` (`s_no`, `sender_id`, `editor_id`, `title`, `body`, `importance`) VALUES
(1, 'A9876543210', 'A9876543210', 'Test Notice', 'This is a test notice body', '1');

COMMIT;
