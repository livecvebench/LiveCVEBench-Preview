FROM python:3.10-slim

WORKDIR /app

# System dependencies
RUN apt-get update && apt-get install -y \
    git \
    tmux \
    asciinema \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Copy application files from task-deps (excluding *_fixed.py files)
COPY task-deps/Linkr.py /app/
COPY task-deps/linkr_extractor.py /app/
COPY task-deps/linkr_compressor.py /app/
COPY task-deps/resource_downloader.py /app/
COPY task-deps/sha256.py /app/
COPY task-deps/colorizer.py /app/
COPY task-deps/global_var.py /app/
COPY task-deps/requirements.txt /app/

# Install Python dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Default command - keep container running (this is a CLI tool)
CMD ["tail", "-f", "/dev/null"]
