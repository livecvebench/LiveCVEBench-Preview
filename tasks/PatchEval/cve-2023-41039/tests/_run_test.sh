#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-41039:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/RestrictedPython
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2023-41039/bin/python -m pytest tests/test_Guards.py::test_Guards__safer_getattr__1a tests/test_Guards.py::test_Guards__safer_getattr__1b tests/test_Guards.py::test_Guards__safer_getattr__1c tests/test_Guards.py::test_Guards__safer_getattr__1d tests/test_Utilities.py::test_Utilities_string_Formatter tests/builtins/test_utilities.py::test_string_in_utility_builtins -v --import-mode=importlib

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-41039:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/RestrictedPython
/workspace/PoC_env/CVE-2023-41039/bin/python -m pytest tests/test_Guards.py tests/test_Utilities.py tests/builtins/test_utilities.py -v -k "not test_Guards__safer_getattr__1 and not test_Guards__safer_getattr__2 and not test_string_in_utility_builtins and not test_Guards__guarded_unpack_sequence__1" --import-mode=importlib -p no:warning --disable-warnings