#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2025-24806:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/authelia
git apply --whitespace=nowarn /tests/test.patch 
cd internal/handlers && go test -timeout 30s -run ^TestFirstFactorSuite$ -testify.m ^TestShouldAuthenticateUserWithEmailAsUsernameInput$ github.com/authelia/authelia/v4/internal/handlers

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2025-24806:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/authelia
cd internal/handlers && go test -timeout 30s -run '^TestFirstFactorSuite$'  github.com/authelia/authelia/v4/internal/handlers