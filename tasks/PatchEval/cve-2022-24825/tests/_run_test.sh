#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-24825:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/smokescreen
git apply --whitespace=nowarn /tests/test.patch 
cd pkg/smokescreen/acl/v1 && go test  -timeout 30s -v 

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-24825:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/smokescreen
cd pkg/smokescreen/acl/v1 && go test -timeout 30s -run '^(TestACLDecision|TestACLAddPolicyDisabled|TestACLAddInvalidDomain|TestACLUnknownServiceWithoutDefault|TestACLAddExistingRule|TestACLMalformedPolicyDisable)$'