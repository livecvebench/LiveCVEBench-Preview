#!/bin/bash

# Entrypoint script for Northstar application with restart capability
# This script wraps the Java application in a loop so the container stays running
# when solution.sh kills and restarts the service process

JAR_PATH="/app/northstar-dist/northstar-7.3.5.jar"

while true; do
    echo "[entrypoint] Starting Northstar application..."
    java -Denv=dev -jar $JAR_PATH
    EXIT_CODE=$?
    echo "[entrypoint] Application exited with code: $EXIT_CODE"
    echo "[entrypoint] Restarting in 2 seconds..."
    sleep 2
done
