cat <<'EOF' > /workspace/fix.patch
diff --git a/lib/index.js b/lib/index.js
index f5da77fc..f1d5adf0 100644
--- a/lib/index.js
+++ b/lib/index.js
@@ -19,6 +19,9 @@ function wrapStaticSecretInCallback(secret){
 module.exports = function(options) {
   if (!options || !options.secret) throw new Error('secret should be set');
 
+  if (!options.algorithms) throw new Error('algorithms should be set');
+  if (!Array.isArray(options.algorithms)) throw new Error('algorithms must be an array');
+
   var secretCallback = options.secret;
 
   if (!isFunction(secretCallback)){
    

EOF

cd /workspace/express-jwt
git apply --whitespace=nowarn  /workspace/fix.patch