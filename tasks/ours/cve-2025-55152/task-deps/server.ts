import { Application } from "./mod.ts";

const app = new Application({ proxy: true });

app.use((ctx) => {
  const result = {
    ip: ctx.request.ip,
    ips: ctx.request.ips,
    protocol: ctx.request.url.protocol,
  };
  ctx.response.body = JSON.stringify(result);
  ctx.response.type = "application/json";
});

console.log("Oak server listening on port 8000");
await app.listen({ hostname: "0.0.0.0", port: 8000 });
