instruction: |-
  LearnHouse is an open-source learning management system with image upload
  functionality for user avatars and course thumbnails.

  When users upload photos to the platform (e.g., as profile pictures or course
  images), internal data embedded in the image files is preserved and served to
  other users. For example, if someone uploads a photo taken with a smartphone,
  the uploaded file retains all metadata from the original image including GPS
  coordinates, device model, camera settings, and timestamps.

  This means that other users can download these images and extract personal
  information about the original uploader. For a learning platform with students
  and educators, this is problematic as it can expose user locations and devices.

  The expected behavior is that when images are uploaded, any embedded metadata
  should be stripped so that only the image content itself is stored and served.
  The upload functionality is handled in the file upload service at
  `apps/api/src/services/utils/upload_content.py`, which currently writes the
  raw file bytes directly to storage without any image processing.

  Please fix the image upload functionality to strip metadata from uploaded
  images before storing them, while preserving the visual content and image
  quality.

difficulty: medium
category: security
tags:
  - python
  - fastapi
  - image-processing
  - metadata
parser_name: pytest

run_tests_in_same_shell: false
