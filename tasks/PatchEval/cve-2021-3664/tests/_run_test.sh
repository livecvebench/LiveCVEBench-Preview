#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2021-3664:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/url-parse
git apply --whitespace=nowarn /tests/test.patch   /workspace/dep.patch
node --require ./preload.js ./node_modules/.bin/mocha --grep "handles slashes after the protocol for non special URLs"

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2021-3664:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/url-parse
node --require ./preload.js ./node_modules/.bin/mocha --grep 'correctly resolves paths|handles the file: protocol' --invert test/test.js