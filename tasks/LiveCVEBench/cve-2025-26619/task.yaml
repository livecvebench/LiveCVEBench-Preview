instruction: |-
  I'm using this data visualization library to create interactive charts. 
  I noticed something strange when experimenting with the scale() expression 
  function.
  
  When I pass certain types of values to the scale function instead of a scale 
  name, the library behaves unexpectedly. Instead of ignoring invalid inputs or 
  returning undefined, it seems to treat the input in a special way that could 
  have unintended side effects.
  
  For example, if I accidentally pass a function reference where a scale name 
  string is expected, the function seems to get invoked rather than being 
  rejected as invalid input.
  
  The expected behavior should be:
  - Only accept valid string scale names as the first argument
  - Return undefined for any non-string input
  - Never invoke or execute arbitrary values passed as arguments
  
  This could be a security concern if user-controlled expressions can reach 
  this code path.

difficulty: medium
category: security
tags:
  - javascript
  - vega
  - input-validation
  - expression-functions
parser_name: pytest
run_tests_in_same_shell: false