cat <<'EOF' > /workspace/fix.patch
diff --git a/internal/db/repo_editor.go b/internal/db/repo_editor.go
index 3edb16e2bdb..0a1c9495840 100644
--- a/internal/db/repo_editor.go
+++ b/internal/db/repo_editor.go
@@ -485,7 +485,10 @@ type UploadRepoFileOptions struct {
 
 // isRepositoryGitPath returns true if given path is or resides inside ".git"
 // path of the repository.
+//
+// TODO(unknwon): Move to repoutil during refactoring for this file.
 func isRepositoryGitPath(path string) bool {
+	path = strings.ToLower(path)
 	return strings.HasSuffix(path, ".git") ||
 		strings.Contains(path, ".git/") ||
 		strings.Contains(path, `.git\`) ||


EOF

cd /workspace/gogs
git apply --whitespace=nowarn  /workspace/fix.patch