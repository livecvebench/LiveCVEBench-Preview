FROM node:18-slim

WORKDIR /app



# System dependencies (tmux, asciinema, curl are required + Python for tests)
RUN apt-get update && apt-get install -y \
    git \
    tmux \
    asciinema \
    curl \
    python3 \
    python3-pip \
    && rm -rf /var/lib/apt/lists/*

# Initialize project and install vulnerable turndown version
RUN npm init -y && npm install turndown@7.2.0

# Copy task-deps for reference (vulnerable/fixed source files and diffs)
COPY task-deps/ /app/task-deps/

# Keep container running for testing
CMD ["tail", "-f", "/dev/null"]
