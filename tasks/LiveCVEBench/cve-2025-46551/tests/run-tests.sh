#!/bin/bash
set -e
cd "$(dirname "$0")"

echo "=========================================="
echo "Installing test dependencies..."
echo "=========================================="

# Install uv for Python package management
curl -LsSf https://astral.sh/uv/0.7.13/install.sh | sh 2>/dev/null
source $HOME/.local/bin/env

# Initialize uv project if needed
uv init 2>/dev/null || true

# Install pytest and requests
uv add pytest requests 2>/dev/null

echo ""
echo "=========================================="
echo "Running all tests..."
echo "=========================================="

uv run pytest . -rA -v

echo ""
echo "=========================================="
echo "Test run complete."
echo "=========================================="
