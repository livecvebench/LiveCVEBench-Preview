instruction: |-
  This application is an MCP (Model Context Protocol) database server that provides
  database query capabilities to AI assistants. It supports PostgreSQL, MySQL, SQLite,
  and MSSQL databases.

  The server has a "read_query" tool designed to execute read-only SELECT queries.
  However, users are reporting unexpected behavior:

  1. When submitting queries like "SELECT pg_sleep(30)", the server hangs for 30
     seconds instead of quickly returning or rejecting the query. This is causing
     timeout issues and resource exhaustion when users accidentally include sleep
     calls.

  2. Queries with semicolons like "SELECT 1; SELECT 2" are being processed, which
     is causing confusion because users expect only a single SELECT statement to
     be allowed.

  3. Administrative function calls like "SELECT pg_terminate_backend(123)" are
     being executed, which has accidentally terminated database connections.

  The read_query tool is located in src/tools/queryTools.ts. We expect this tool to
  only allow simple, safe SELECT queries - it should reject any queries containing
  semicolons (to prevent multiple statements) and block calls to PostgreSQL
  administrative functions that have side effects.

  Please fix the readQuery function to properly validate input queries and reject
  dangerous patterns while still allowing legitimate SELECT statements.

difficulty: medium
category: bug-fix
tags:
  - typescript
  - input-validation
  - postgresql
  - mcp
parser_name: pytest

run_tests_in_same_shell: false
