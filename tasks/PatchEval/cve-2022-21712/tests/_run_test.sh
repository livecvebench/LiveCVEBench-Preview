#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-21712:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/twisted
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2022-21712/bin/python -m pytest src/twisted/web/test/test_agent.py::RedirectAgentTests  src/twisted/web/test/test_agent.py::RedirectAgentTests -p no:warning --disable-warnings --import-mode=importlib

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-21712:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/twisted
/workspace/PoC_env/CVE-2022-21712/bin/python -m pytest src/twisted/web/test/test_agent.py -p no:warning --disable-warnings --import-mode=importlib