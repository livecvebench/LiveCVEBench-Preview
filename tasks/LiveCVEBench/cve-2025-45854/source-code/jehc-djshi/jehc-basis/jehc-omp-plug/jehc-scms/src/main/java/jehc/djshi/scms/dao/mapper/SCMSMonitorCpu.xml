<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.scms.dao.SCMSMonitorCpuDao">
    <!--初始化分页-->
    <select id="getSCMSMonitorCpuListByCondition" resultType="jehc.djshi.scms.model.SCMSMonitorCpu" parameterType="map">
        SELECT
            scms_monitor_cpu.id,
            scms_monitor_cpu.mac,
            scms_monitor_cpu.cpu_total_mhz AS cpuTotalMhz,
            scms_monitor_cpu.cpu_producer AS cpuProducer,
            scms_monitor_cpu.cpu_cache AS cpuCache,
            scms_monitor_cpu.cpu_user_use_rate AS cpuUserUseRate,
            scms_monitor_cpu.cpu_sys_use_rate AS cpuSysUseRate,
            scms_monitor_cpu.cpu_wait_use_rate AS cpuWaitUseRate,
            scms_monitor_cpu.cpu_error_use_rate AS cpuErrorUseRate,
            scms_monitor_cpu.cpu_currently_idle AS cpuCurrentlyIdle,
            scms_monitor_cpu.cpu_use_rate AS cpuUseRate,
            scms_monitor_cpu.num,
            scms_monitor_cpu.create_time AS createTime,
            scms_monitor.local_name AS localName,
            scms_monitor.ip
        FROM
            scms_monitor_cpu scms_monitor_cpu LEFT JOIN scms_monitor scms_monitor ON scms_monitor.mac = scms_monitor_cpu.mac
        WHERE 1=1
            <if test="null != localName">
                AND scms_monitor.local_name LIKE CONCAT(CONCAT('%',#{localName}),'%')
            </if>
            <if test="null != ip">
                AND scms_monitor.ip LIKE CONCAT(CONCAT('%',#{ip}),'%')
            </if>
            ORDER BY scms_monitor_cpu.create_time DESC
    </select>

    <!--查询列表-->
    <select id="getSCMSMonitorCpuList" resultType="jehc.djshi.scms.model.SCMSMonitorCpu" parameterType="jehc.djshi.scms.model.SCMSMonitorCpu">
        SELECT
            scms_monitor_cpu.id,
            scms_monitor_cpu.mac,
            scms_monitor_cpu.cpu_total_mhz AS cpuTotalMhz,
            scms_monitor_cpu.cpu_producer AS cpuProducer,
            scms_monitor_cpu.cpu_cache AS cpuCache,
            scms_monitor_cpu.cpu_user_use_rate AS cpuUserUseRate,
            scms_monitor_cpu.cpu_sys_use_rate AS cpuSysUseRate,
            scms_monitor_cpu.cpu_wait_use_rate AS cpuWaitUseRate,
            scms_monitor_cpu.cpu_error_use_rate AS cpuErrorUseRate,
            scms_monitor_cpu.cpu_currently_idle AS cpuCurrentlyIdle,
            scms_monitor_cpu.cpu_use_rate AS cpuUseRate,
            scms_monitor_cpu.num,
            scms_monitor_cpu.create_time AS createTime
        FROM
            scms_monitor_cpu scms_monitor_cpu
        WHERE 1=1
            <if test="null != mac">
                AND scms_monitor_cpu.mac = #{mac}
            </if>
            ORDER BY scms_monitor_cpu.create_time DESC
    </select>

    <!--查询对象-->
    <select id="getSCMSMonitorCpuById" resultType="jehc.djshi.scms.model.SCMSMonitorCpu" parameterType="string">
        SELECT
            scms_monitor_cpu.id,
            scms_monitor_cpu.mac,
            scms_monitor_cpu.cpu_total_mhz AS cpuTotalMhz,
            scms_monitor_cpu.cpu_producer AS cpuProducer,
            scms_monitor_cpu.cpu_cache AS cpuCache,
            scms_monitor_cpu.cpu_user_use_rate AS cpuUserUseRate,
            scms_monitor_cpu.cpu_sys_use_rate AS cpuSysUseRate,
            scms_monitor_cpu.cpu_wait_use_rate AS cpuWaitUseRate,
            scms_monitor_cpu.cpu_error_use_rate AS cpuErrorUseRate,
            scms_monitor_cpu.cpu_currently_idle AS cpuCurrentlyIdle,
            scms_monitor_cpu.cpu_use_rate AS cpuUseRate,
            scms_monitor_cpu.num,
            scms_monitor_cpu.create_time AS createTime,
            scms_monitor.local_name AS localName,
            scms_monitor.ip
        FROM
            scms_monitor_cpu scms_monitor_cpu LEFT JOIN scms_monitor scms_monitor ON scms_monitor.mac = scms_monitor_cpu.mac
        WHERE
            scms_monitor_cpu.id=#{id}
    </select>

    <!--添加-->
    <insert id="addSCMSMonitorCpu" parameterType="jehc.djshi.scms.model.SCMSMonitorCpu">
        INSERT INTO
        scms_monitor_cpu
        (
        id,
        mac,
        cpu_total_mhz,
        cpu_producer,
        cpu_cache,
        cpu_user_use_rate,
        cpu_sys_use_rate,
        cpu_wait_use_rate,
        cpu_error_use_rate,
        cpu_currently_idle,
        cpu_use_rate,
        num,
        create_time,
        del_flag
        )
        VALUES
        (
        #{id},
        #{mac},
        #{cpuTotalMhz},
        #{cpuProducer},
        #{cpuCache},
        #{cpuUserUseRate},
        #{cpuSysUseRate},
        #{cpuWaitUseRate},
        #{cpuErrorUseRate},
        #{cpuCurrentlyIdle},
        #{cpuUseRate},
        #{num},
        #{createTime},
        0
        )
    </insert>

    <!--删除-->
    <delete id="delSCMSMonitorCpu" parameterType="map">
        DELETE FROM scms_monitor_cpu WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>
</mapper>