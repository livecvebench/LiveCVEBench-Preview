<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.sys.dao.XtNumberDao">
	<!--初始化分页-->
	<select id="getXtNumberListByCondition" resultType="jehc.djshi.sys.model.XtNumber" parameterType="map">
		SELECT
			id,
			last_value AS lastValue,
			version,
			create_time AS createTime,
			update_time AS updateTime,
			type
		FROM
			xt_number
		WHERE 1=1
	</select>

	<!--读取唯一一条记录根据类型-->
	<select id="getXtNumberSingleByType" resultType="jehc.djshi.sys.model.XtNumber" parameterType="string">
		SELECT
			id,
			last_value AS lastValue,
			version,
			create_time AS createTime,
			update_time AS updateTime,
			type
		FROM
			xt_number
		WHERE type = #{type}
	</select>

	<!--添加-->
	<insert id="addXtNumber" parameterType="jehc.djshi.sys.model.XtNumber">
		INSERT INTO
			xt_number
		(
			id,
			last_value,
			version,
			create_time,
			update_time,
			type
		)
		VALUES
		(
			#{id},
			#{lastValue},
			#{version},
			#{createTime},
			#{updateTime},
			#{type}
		)
	</insert>

	<!--修改-->
	<update id="updateXtNumber" parameterType="jehc.djshi.sys.model.XtNumber">
		UPDATE
			xt_number
		SET
			last_value = #{lastValue},
			version = version+1,
			update_time = #{updateTime}
		WHERE type=#{type} AND version = #{version}
	</update>

</mapper>