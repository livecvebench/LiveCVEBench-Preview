<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.LcNodeAttributeDao">
	<!--初始化分页-->
	<select id="getLcNodeAttributeListByCondition" resultType="jehc.djshi.workflow.model.LcNodeAttribute" parameterType="map">
		SELECT
			id,
			node_name AS nodeName,
			node_id AS nodeId,
			remark,
			create_time AS createTime,
			update_time AS updateTime,
			create_id AS createId,
			update_id AS updateId,
			notice_type AS noticeType,
			attr,
			lc_process_id AS lcProcessId,
			hid_,
			attribute_key AS  attributeKey,
			pc_form_uri AS pcFormUri,
			mobile_form_uri AS mobileFormUri,
			initiator,
			opinion,
			allow_recall AS allowRecall,
			recall,
			reject_type AS rejectType,
			reject_rule AS rejectRule,
			support_free_jump AS supportFreeJump,
			reject_executor AS rejectExecutor,
			reject_termination_other_execution AS rejectTerminationOtherExecution,
			mutil_key AS mutilKey,
			mutil,
			mounts_id AS mountsId,
			policy,
			voting_strategy AS votingStrategy,
			percentage,
			number_votes AS numberVotes,
			allow_sign AS allowSign,
			need_all_vote AS needAllVote,
			order_number AS orderNumber,
			urgent,
			notify_template_ids AS notifyTemplateIds
		FROM
			lc_node_attribute
		WHERE 1=1
			<if test="null != lcProcessId">
				AND lcProcessId = #{lcProcessId}
			</if>

			<if test="null != mountsId">
				AND mounts_id = #{mountsId}
			</if>

			<if test="null != hid_">
				AND hid_ = #{hid_}
			</if>
			<if test="null != initiator">
				AND initiator = #{initiator}
			</if>
			<if test="null != nodeId">
				AND node_id IN
				<foreach item="item" index="index" collection="nodeId.split(',')" open="(" separator="," close=")">
					#{item}
				</foreach>
			</if>
	</select>

	<!--查询对象-->
	<select id="getLcNodeAttributeById" resultType="jehc.djshi.workflow.model.LcNodeAttribute" parameterType="string">
		SELECT
			id,
			node_name AS nodeName,
			node_id AS nodeId,
			remark,
			create_time AS createTime,
			update_time AS updateTime,
			create_id AS createId,
			update_id AS updateId,
			notice_type AS noticeType,
			attr,
			lc_process_id AS lcProcessId,
			hid_,
			attribute_key AS  attributeKey,
			pc_form_uri AS pcFormUri,
			mobile_form_uri AS mobileFormUri,
			initiator,
			opinion,
			allow_recall AS allowRecall,
			recall,
			reject_type AS rejectType,
			reject_rule AS rejectRule,
			support_free_jump AS supportFreeJump,
			reject_executor AS rejectExecutor,
			reject_termination_other_execution AS rejectTerminationOtherExecution,
			mutil_key AS mutilKey,
			mutil,
			mounts_id AS mountsId,
			policy,
			voting_strategy AS votingStrategy,
			percentage,
			number_votes AS numberVotes,
			allow_sign AS allowSign,
			need_all_vote AS needAllVote,
			order_number AS orderNumber,
			urgent,
			notify_template_ids AS notifyTemplateIds
		FROM
			lc_node_attribute
		WHERE id=#{id}
	</select>

	<!--添加-->
	<insert id="addLcNodeAttribute" parameterType="jehc.djshi.workflow.model.LcNodeAttribute">
		INSERT INTO
			lc_node_attribute
		(
			id,
			node_name,
			node_id,
			remark,
			create_time,
			update_time,
			create_id,
			update_id,
			attribute_key,
			notice_type,
			attr,
			lc_process_id,
			hid_,
			pc_form_uri,
			mobile_form_uri,
			initiator,
			opinion,
			allow_recall,
			recall,
			reject_type,
			reject_rule,
			support_free_jump,
			reject_termination_other_execution,
			reject_executor,
			mutil_key,
			mutil,
			mounts_id,
			policy,
			voting_strategy,
			percentage,
			number_votes,
			allow_sign,
			need_all_vote,
			order_number,
			urgent,
			notify_template_ids
		)
		VALUES
		(
			#{id},
			#{nodeName},
			#{nodeId},
			#{remark},
			#{createTime},
			#{updateTime},
			#{createId},
			#{updateId},
			#{attributeKey},
			#{noticeType},
			#{attr},
			#{lcProcessId},
			#{hid_},
			#{pcFormUri},
			#{mobileFormUri},
			#{initiator},
			#{opinion},
			#{allowRecall},
			#{recall},
			#{rejectType},
			#{rejectRule},
			#{supportFreeJump},
			#{rejectTerminationOtherExecution},
			#{rejectExecutor},
			#{mutilKey},
			#{mutil},
			#{mountsId},
			#{policy},
			#{votingStrategy},
			#{percentage},
			#{numberVotes},
			#{allowSign},
			#{needAllVote},
			#{orderNumber},
			#{urgent},
			#{notifyTemplateIds}
		)
	</insert>

	<!--修改-->
	<update id="updateLcNodeAttribute" parameterType="jehc.djshi.workflow.model.LcNodeAttribute">
		UPDATE
			lc_node_attribute
		SET
			node_name = #{nodeName},
			node_id = #{nodeId},
			hid_ = #{hid_},
			remark = #{remark},
			create_time = #{createTime},
			update_time = #{updateTime},
			create_id = #{createId},
			update_id = #{updateId},
			attribute_key = #{attributeKey},
			notice_type = #{noticeType},
			attr = #{attr},
			lc_process_id = #{lcProcessId},
			pc_form_uri = #{pcFormUri},
			mobile_form_uri = #{mobileFormUri},
			hid_ = #{hid_},
			initiator=#{initiator},
			opinion = #{opinion},
			allow_recall = #{allowRecall},
			recall = #{recall},
			reject_type = #{rejectType},
			reject_rule = #{rejectRule},
			support_free_jump = #{supportFreeJump},
			reject_termination_other_execution = #{rejectTerminationOtherExecution},
			reject_executor = #{rejectExecutor},
			mutil_key = #{mutilKey},
			mutil = #{mutil},
			mounts_id = #{mountsId},
			policy = #{policy},
			voting_strategy = #{votingStrategy},
			percentage = #{percentage},
			number_votes = #{numberVotes},
			allow_sign = #{allowSign},
			need_all_vote = #{needAllVote},
			order_number = #{orderNumber},
			urgent = #{urgent},
			notify_template_ids = #{notifyTemplateIds}
		WHERE id=#{id}
	</update>

	<!--修改（根据动态条件）-->
	<update id="updateLcNodeAttributeBySelective" parameterType="jehc.djshi.workflow.model.LcNodeAttribute">
		UPDATE
		lc_node_attribute
		<set>
			<if test="nodeId != null">
				node_id = #{nodeId},
			</if>
			<if test="nodeName != null">
				node_name = #{nodeName},
			</if>
			<if test="hid_ != null">
				hid_ = #{hid_},
			</if>
			<if test="remark != null">
				remark = #{remark},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="updateId != null">
				update_id = #{updateId},
			</if>
			<if test="attributeKey != null">
				attribute_key = #{attributeKey},
			</if>
			<if test="noticeType != null">
				notice_type = #{noticeType},
			</if>
			<if test="attr != null">
				attr = #{attr},
			</if>
			<if test="lcProcessId != null">
				lc_process_id = #{lcProcessId},
			</if>
			<if test="hid_ != null">
				hid_ = #{hid_},
			</if>
			<if test="pcFormUri != null">
				pc_form_uri = #{pcFormUri},
			</if>
			<if test="mobileFormUri != null">
				mobile_form_uri = #{mobileFormUri},
			</if>
			<if test="initiator != null">
				initiator = #{initiator},
			</if>
			<if test="opinion != null">
				opinion = #{opinion},
			</if>
			<if test="allowRecall != null">
				allow_recall = #{allowRecall},
			</if>
			<if test="recall != null">
				recall = #{recall},
			</if>
			<if test="rejectType != null">
				reject_type = #{rejectType},
			</if>
			<if test="rejectRule != null">
				reject_rule = #{rejectRule},
			</if>
			<if test="supportFreeJump != null">
				support_free_jump = #{supportFreeJump},
			</if>
			<if test="rejectTerminationOtherExecution != null">
				reject_termination_other_execution = #{rejectTerminationOtherExecution},
			</if>
			<if test="rejectExecutor != null">
				reject_executor = #{rejectExecutor},
			</if>
			<if test="mutilKey != null">
				mutil_key = #{mutilKey},
			</if>
			<if test="mutil != null">
				mutil = #{mutil},
			</if>
			<if test="mountsId != null">
				mounts_id = #{mountsId},
			</if>
			<if test="policy != null">
				policy = #{policy},
			</if>
			<if test="votingStrategy != null">
				voting_strategy = #{votingStrategy},
			</if>
			<if test="percentage != null">
				percentage = #{percentage},
			</if>
			<if test="numberVotes != null">
				number_votes = #{numberVotes},
			</if>
			<if test="allowSign != null">
				allow_sign = #{allowSign},
			</if>
			<if test="needAllVote != null">
				need_all_vote = #{needAllVote},
			</if>
			<if test="orderNumber != null">
				order_number = #{orderNumber},
			</if>
			<if test="urgent != null">
				urgent = #{urgent},
			</if>
			<if test="notifyTemplateIds != null">
				notify_template_ids = #{notifyTemplateIds},
			</if>
		</set>
		WHERE id=#{id}
	</update>

	<!--删除-->
	<delete id="delLcNodeAttribute" parameterType="map">
		DELETE FROM lc_node_attribute WHERE id IN
		<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>

	<!--根据编号删除-->
	<delete id="delLcNodeAttributeById" parameterType="string">
		DELETE FROM lc_node_attribute WHERE id = #{id}
	</delete>

	<!--根据节点id+部署记录查找唯一-->
	<select id="getLcNodeAttribute" resultType="jehc.djshi.workflow.model.LcNodeAttribute" parameterType="jehc.djshi.workflow.param.NodeAttributeParam">
		SELECT
			id,
			node_name AS nodeName,
			node_id AS nodeId,
			remark,
			create_time AS createTime,
			update_time AS updateTime,
			create_id AS createId,
			update_id AS updateId,
			notice_type AS noticeType,
			attr,
			lc_process_id AS lcProcessId,
			hid_,
			attribute_key AS  attributeKey,
			pc_form_uri AS pcFormUri,
			mobile_form_uri AS mobileFormUri,
			initiator,
			opinion,
			allow_recall AS allowRecall,
			recall,
			reject_type AS rejectType,
			reject_rule AS rejectRule,
			support_free_jump AS supportFreeJump,
			reject_executor AS rejectExecutor,
			reject_termination_other_execution AS rejectTerminationOtherExecution,
			mutil_key AS mutilKey,
			mutil,
			mounts_id AS mountsId,
			policy,
			voting_strategy AS votingStrategy,
			percentage,
			number_votes AS numberVotes,
			allow_sign AS allowSign,
			need_all_vote AS needAllVote,
			order_number AS orderNumber,
			urgent,
			notify_template_ids AS notifyTemplateIds
		FROM
			lc_node_attribute
		WHERE 1=1
			AND node_id=#{nodeId}
			<if test="null != hid_ and '' != hid_">
				AND hid_ = #{hid_}
			</if>
			<if test="null != mountsId and '' != mountsId">
				AND mounts_id = #{mountsId}
			</if>
	</select>
</mapper>