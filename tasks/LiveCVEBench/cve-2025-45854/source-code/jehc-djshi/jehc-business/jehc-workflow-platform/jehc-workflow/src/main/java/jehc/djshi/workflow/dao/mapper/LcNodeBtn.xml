<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.LcNodeBtnDao">
	<!--初始化分页-->
	<select id="getLcNodeBtnListByCondition" resultType="jehc.djshi.workflow.model.LcNodeBtn" parameterType="map">
		SELECT
			lc_node_btn.id,
			lc_node_btn.create_time AS createTime,
			lc_node_btn.update_time AS updateTime,
			lc_node_btn.create_id AS createId,
			lc_node_btn.update_id AS updateId,
			lc_node_btn.del_flag AS delFlag,
			lc_node_btn.btn_id AS btnId,
			lc_node_btn.lc_process_id AS lcProcessId,
			lc_node_btn.lc_deployment_id AS lcDeploymentId,
			lc_node_btn.node_id AS nodeId,
			lc_node_btn.lc_node_attribute_id AS lcNodeAttributeId,
			lc_btn.label_,
			lc_btn.action_,
			lc_node_btn.btn_label AS btnLabel,
			lc_node_btn.btn_action AS btnAction
		FROM
			lc_node_btn lc_node_btn LEFT JOIN lc_btn lc_btn ON lc_btn.id = lc_node_btn.btn_id
		WHERE 1=1
			<if test="null != btnId">
				AND lc_node_btn.btn_id = #{btnId}
			</if>
			<if test="null != lcProcessId">
				AND lc_node_btn.lc_process_id = #{lcProcessId}
			</if>
			<if test="null != nodeId">
				AND lc_node_btn.node_id = #{nodeId}
			</if>
			<if test="null != lcNodeAttributeId">
				AND lc_node_btn.lc_node_attribute_id = #{lcNodeAttributeId}
			</if>
			ORDER BY lc_btn.sort_ ASC
	</select>

	<!--查询对象-->
	<select id="getLcNodeBtnById" resultType="jehc.djshi.workflow.model.LcNodeBtn" parameterType="string">
		SELECT
			lc_node_btn.id,
			lc_node_btn.create_time AS createTime,
			lc_node_btn.update_time AS updateTime,
			lc_node_btn.create_id AS createId,
			lc_node_btn.update_id AS updateId,
			lc_node_btn.del_flag AS delFlag,
			lc_node_btn.btn_id AS btnId,
			lc_node_btn.lc_process_id AS lcProcessId,
			lc_node_btn.lc_deployment_id AS lcDeploymentId,
			lc_node_btn.node_id AS nodeId,
			lc_node_btn.lc_node_attribute_id AS lcNodeAttributeId,
			lc_btn.label_,
			lc_btn.action_,
			lc_node_btn.btn_label AS btnLabel,
			lc_node_btn.btn_action AS btnAction
		FROM
			lc_node_btn lc_node_btn LEFT JOIN lc_btn lc_btn ON lc_btn.id = lc_node_btn.btn_id
		WHERE lc_node_btn.id=#{id}
	</select>

	<!--添加-->
	<insert id="addLcNodeBtn" parameterType="jehc.djshi.workflow.model.LcNodeBtn">
		INSERT INTO
			lc_node_btn
		(
			id,
			create_time,
			update_time,
			create_id,
			update_id,
			del_flag,
			btn_id,
			lc_process_id,
			lc_deployment_id,
			node_id,
			lc_node_attribute_id,
			btn_label,
			btn_action
		)
		VALUES
		(
			#{id},
			#{createTime},
			#{updateTime},
			#{createId},
			#{updateId},
			0,
			#{btnId},
			#{lcProcessId},
			#{lcDeploymentId},
			#{nodeId},
			#{lcNodeAttributeId},
			#{btnLabel},
			#{btnAction}
		)
	</insert>

	<!--修改-->
	<update id="updateLcNodeBtn" parameterType="jehc.djshi.workflow.model.LcNodeBtn">
		UPDATE
			lc_node_btn
		SET
			update_time = #{updateTime},
			update_id = #{updateId},
			btn_id = #{btnId},
			lc_process_id = #{lcProcessId},
			lc_deployment_id = #{lcDeploymentId},
			node_id = #{nodeId},
			lc_node_attribute_id = #{lcNodeAttributeId},
			btn_label = #{btnLabel},
			btn_action = #{btnAction}
		WHERE id=#{id}
	</update>

	<!--修改（根据动态条件）-->
	<update id="updateLcNodeBtnBySelective" parameterType="jehc.djshi.workflow.model.LcNodeBtn">
		UPDATE
		lc_node_btn
		<set>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="updateId != null">
				update_id = #{updateId},
			</if>
			<if test="btnId != null">
				btn_id = #{btnId},
			</if>
			<if test="lcProcessId != null">
				lc_process_id = #{lcProcessId},
			</if>
			<if test="lcDeploymentId != null">
				lc_deployment_id = #{lcDeploymentId},
			</if>
			<if test="nodeId != null">
				node_id = #{nodeId},
			</if>
			<if test="lcNodeAttributeId != null">
				lc_node_attribute_id = #{lcNodeAttributeId},
			</if>
			<if test="btnLabel != null">
				btn_label = #{btnLabel},
			</if>
			<if test="btnAction != null">
				btn_action = #{btnAction},
			</if>
		</set>
		WHERE id=#{id}
	</update>

	<!--删除-->
	<delete id="delLcNodeBtn" parameterType="map">
		DELETE FROM lc_node_btn WHERE id IN
		<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>

	<!--根据属性id删除-->
	<delete id="delLcNodeBtnByAttributeId" parameterType="string">
		DELETE FROM lc_node_btn WHERE lc_node_attribute_id = #{lcNodeAttributeId}
	</delete>
</mapper>