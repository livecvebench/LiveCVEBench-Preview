#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2021-41125:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/scrapy
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2021-41125/bin/python -m pytest tests/test_downloadermiddleware_httpauth.py -k "HttpAuthMiddlewareLegacyTest or HttpAuthAnyMiddlewareTest or test_no_auth or test_auth_domain or test_auth_subdomain" -p no:warning --disable-warnings

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2021-41125:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/scrapy
/workspace/PoC_env/CVE-2021-41125/bin/python -m pytest tests/test_downloadermiddleware_httpauth.py -p no:warning --disable-warnings