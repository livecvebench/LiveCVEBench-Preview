#!/bin/bash
# Entrypoint script that restarts the application if it crashes
# This is needed because the vulnerability causes the server to crash

cd /app

while true; do
    echo "[entrypoint] Starting Fiber application..."
    ./server
    EXIT_CODE=$?
    echo "[entrypoint] Application exited with code $EXIT_CODE, restarting in 2 seconds..."
    sleep 2
done
