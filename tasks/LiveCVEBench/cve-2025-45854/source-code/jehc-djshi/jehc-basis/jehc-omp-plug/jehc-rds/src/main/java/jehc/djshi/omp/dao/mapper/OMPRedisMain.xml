<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.omp.dao.OMPRedisMainDao">
    <!--初始化分页-->
    <select id="getRedisMainListByCondition" resultType="jehc.djshi.omp.model.OMPRedisMain" parameterType="map">
        SELECT
            omp_redis_main.id,
            omp_redis_main.config_id AS configId,
            omp_redis_main.info,
            omp_redis_main.create_time AS createTime,
            omp_redis_config.name,
            omp_redis_config.host
        FROM
          omp_redis_main omp_redis_main LEFT JOIN omp_redis_config omp_redis_config ON omp_redis_config.id = omp_redis_main.config_id
        WHERE 1=1
        <if test="null != name">
            AND omp_redis_config.name LIKE CONCAT(CONCAT('%',#{name}),'%')
        </if>
        <if test="null != host">
            AND omp_redis_config.host LIKE CONCAT(CONCAT('%',#{host}),'%')
        </if>
        ORDER BY omp_redis_main.create_time DESC
    </select>

    <!--查询列表-->
    <select id="getRedisMainList" resultType="jehc.djshi.omp.model.OMPRedisMain" parameterType="jehc.djshi.omp.model.OMPRedisMain">
        SELECT
            omp_redis_main.id,
            omp_redis_main.config_id AS configId,
            omp_redis_main.info,
            omp_redis_main.create_time AS createTime,
            omp_redis_config.name,
            omp_redis_config.host
        FROM
          omp_redis_main omp_redis_main LEFT JOIN omp_redis_config omp_redis_config ON omp_redis_config.id = omp_redis_main.config_id
        WHERE 1=1
        <if test="null != configId">
            AND omp_redis_main.config_id = #{configId}
        </if>
        ORDER BY omp_redis_main.create_time DESC
    </select>

    <!--查询对象-->
    <select id="getRedisMainById" resultType="jehc.djshi.omp.model.OMPRedisMain" parameterType="string">
        SELECT
            omp_redis_main.id,
            omp_redis_main.config_id AS configId,
            omp_redis_main.info,
            omp_redis_main.create_time AS createTime,
            omp_redis_config.name,
            omp_redis_config.host
        FROM
          omp_redis_main omp_redis_main LEFT JOIN omp_redis_config omp_redis_config ON omp_redis_config.id = omp_redis_main.config_id
        WHERE
          omp_redis_main.id=#{id}
    </select>

    <!--添加-->
    <insert id="addRedisMain" parameterType="jehc.djshi.omp.model.OMPRedisMain">
        INSERT INTO
        omp_redis_main
        (
        id,
        config_id,
        info,
        create_time,
        update_time,
        create_id,
        update_id,
        del_flag
        )
        VALUES
        (
        #{id},
        #{configId},
        #{info},
        #{createTime},
        #{updateTime},
        #{createId},
        #{updateId},
        0
        )
    </insert>

    <!--删除-->
    <delete id="delRedisMain" parameterType="map">
        DELETE FROM omp_redis_main WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>
</mapper>