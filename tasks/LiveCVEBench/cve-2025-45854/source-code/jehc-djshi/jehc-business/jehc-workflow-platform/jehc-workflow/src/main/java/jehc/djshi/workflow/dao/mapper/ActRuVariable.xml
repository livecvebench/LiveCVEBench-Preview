<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.ActRunVariableDao">

    <!--根据流程实例id删除-->
    <delete id="delActRunVariableByInstanceId" parameterType="string">
        delete from ACT_RU_VARIABLE where PROC_INST_ID_ = #{processInstanceId}
    </delete>

    <!--查询运行时变量集合-->
    <select id="getActRuVariableListByCondition" resultType="jehc.djshi.workflow.model.ActRuVariable" parameterType="map">
        SELECT
            ID_ AS id,
            REV_ AS rev,
            TYPE_ AS type,
            NAME_ AS name,
            EXECUTION_ID_ AS executionId,
            PROC_INST_ID_ AS procInstId,
            TASK_ID_ AS taskId,
            BYTEARRAY_ID_ AS byteArrayId,
            DOUBLE_ AS double_,
            LONG_ AS long_,
            TEXT_ AS text,
            TEXT2_ AS text2
        FROM
          act_ru_variable
        WHERE 1=1
        <if test="null != id">
            AND ID_ = #{id}
        </if>
        <if test="null != procInstId">
            AND PROC_INST_ID_ = #{procInstId}
        </if>
        <if test="null != executionId">
            AND EXECUTION_ID_ = #{executionId}
        </if>
        <if test="null != name">
            AND NAME_ = #{name}
        </if>
    </select>

    <!--查询单个运行时变量-->
    <select id="getActRuVariableById" resultType="jehc.djshi.workflow.model.ActRuVariable" parameterType="map">
        SELECT
            ID_ AS id,
            REV_ AS rev,
            TYPE_ AS type,
            NAME_ AS name,
            EXECUTION_ID_ AS executionId,
            PROC_INST_ID_ AS procInstId,
            TASK_ID_ AS taskId,
            BYTEARRAY_ID_ AS byteArrayId,
            DOUBLE_ AS double_,
            LONG_ AS long_,
            TEXT_ AS text,
            TEXT2_ AS text2
        FROM
          act_ru_variable
        WHERE ID_ = #{id}
    </select>

    <!--删除运行时变量-->
    <delete id="delActRunVariable" parameterType="string">
        DELETE FROM act_ru_variable WHERE ID_ = #{id}
    </delete>

    <!--根据运行实例删除运行时变量-->
    <delete id="delActRunVariableByExecutionId" parameterType="string">
        DELETE FROM act_ru_variable WHERE EXECUTION_ID_ = #{id}
    </delete>


    <!--创建运行时变量-->
    <insert id="addActRunVariable" parameterType="jehc.djshi.workflow.model.ActRuVariable">
        INSERT INTO
        ACT_RU_VARIABLE
        (ID_,
        REV_,
        TYPE_,
        NAME_,
        PROC_INST_ID_,
        EXECUTION_ID_,
        TASK_ID_,
        BYTEARRAY_ID_,
        DOUBLE_,
        LONG_ ,
        TEXT_,
        TEXT2_)
        VALUES
        (
        #{id},
        #{rev},
        #{type},
        #{name},
        #{procInstId},
        #{executionId},
        #{taskId},
        #{byteArrayId},
        #{double_},
        #{long_},
        #{text},
        #{text2}
        )
    </insert>
</mapper>