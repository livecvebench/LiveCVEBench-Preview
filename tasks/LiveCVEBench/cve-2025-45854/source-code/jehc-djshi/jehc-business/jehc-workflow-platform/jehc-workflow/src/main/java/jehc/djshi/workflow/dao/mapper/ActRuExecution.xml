<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.ActRuExecutionDao">

    <!--查询运行实例集合-->
    <select id="getActRuExecutionListByCondition" resultType="jehc.djshi.workflow.model.ActRuExecution" parameterType="map">
        SELECT
            ID_ AS id,
            REV_ AS rev,
            PROC_INST_ID_ AS procInstId,
            BUSINESS_KEY_ AS businessKey,
            PARENT_ID_ AS parentId,
            PROC_DEF_ID_ AS procDefId,
            SUPER_EXEC_ AS superExec,
            ACT_ID_ AS actId,
            IS_ACTIVE_ AS isActive,
            IS_CONCURRENT_ AS isConcurrent,
            IS_SCOPE_ AS isScope,
            IS_EVENT_SCOPE_ AS isEventScope,
            SUSPENSION_STATE_ AS suspensionState,
            CACHED_ENT_STATE_ AS cachedEntState,
            TENANT_ID_ AS tenantId,
            NAME_ AS name
        FROM
          act_ru_execution
        WHERE 1=1
        <if test="null != id">
            AND ID_ = #{id}
        </if>
        <if test="null != parentId">
            AND PARENT_ID_ = #{parentId}
        </if>
        <if test="null != procInstId">
            AND PROC_INST_ID_ = #{procInstId}
        </if>
        <if test="null != procDefId">
            AND PROC_DEF_ID_ = #{procDefId}
        </if>
        <if test="null != businessKey">
            AND BUSINESS_KEY_ = #{businessKey}
        </if>
        ORDER BY PROC_INST_ID_ ASC ,PARENT_ID_ ASC ,PROC_DEF_ID_ ASC
    </select>

    <!--查询单个运行实例-->
    <select id="getActRuExecutionById" resultType="jehc.djshi.workflow.model.ActRuExecution" parameterType="map">
        SELECT
            ID_ AS id,
            REV_ AS rev,
            PROC_INST_ID_ AS procInstId,
            BUSINESS_KEY_ AS businessKey,
            PARENT_ID_ AS parentId,
            PROC_DEF_ID_ AS procDefId,
            SUPER_EXEC_ AS superExec,
            ACT_ID_ AS actId,
            IS_ACTIVE_ AS isActive,
            IS_CONCURRENT_ AS isConcurrent,
            IS_SCOPE_ AS isScope,
            IS_EVENT_SCOPE_ AS isEventScope,
            SUSPENSION_STATE_ AS suspensionState,
            CACHED_ENT_STATE_ AS cachedEntState,
            TENANT_ID_ AS tenantId,
            NAME_ AS name
        FROM
          act_ru_execution
        WHERE ID_ = #{id}
    </select>

    <!--删除运行实例-->
    <delete id="delActRuExecution" parameterType="string">
        DELETE FROM act_ru_execution WHERE ID_ = #{id}
    </delete>

    <!--创建运行实例-->
    <insert id="addActRunExecution" parameterType="jehc.djshi.workflow.model.ActRuExecution">
        INSERT INTO
        ACT_RU_EXECUTION
        (
        ID_,
        REV_,
        PROC_INST_ID_,
        BUSINESS_KEY_,
        PROC_DEF_ID_,
        ACT_ID_,
        IS_ACTIVE_,
        IS_CONCURRENT_,
        IS_SCOPE_,
        IS_EVENT_SCOPE_,
        PARENT_ID_,
        SUPER_EXEC_,
        SUSPENSION_STATE_,
        CACHED_ENT_STATE_,
        TENANT_ID_,
        NAME_
        )
        VALUES
        (
        #{id},
        #{rev},
        #{procInstId},
        #{businessKey},
        #{procDefId},
        #{actId},
        #{isActive},
        #{isConcurrent},
        #{isScope},
        #{isEventScope},
        #{parentId},
        #{superExec},
        #{suspensionState},
        #{cachedEntState},
        #{tenantId},
        #{name}
        )
    </insert>
</mapper>