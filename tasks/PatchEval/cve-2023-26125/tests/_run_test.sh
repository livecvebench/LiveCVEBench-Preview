#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-26125:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/gin
git apply --whitespace=nowarn /tests/test.patch 
go test  -timeout 30s -run ^TestRouteRedirectTrailingSlash$ github.com/gin-gonic/gin

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-26125:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/gin
go test -timeout 30s -run '^(TestEngineHandleMethodNotAllowedCornerCase|TestRouteNotOK2|TestRouterGroupRouteOK|TestRouteRedirectFixedPath|TestRouteContextHoldsFullPath|TestRouteServeErrorWithWriteHeader|TestRouterNotFoundWithRemoveExtraSlash|TestRouterStaticFSNotFound|TestRouteParamsByNameWithExtraSlash|TestRouterStaticFSFileNotFound|TestRouteNotAllowedEnabled2|TestRouteNotAllowedEnabled|TestRouteRawPath|TestRouterMiddlewareAndStatic|TestRouteParamsByName|TestRouterNotFound|TestRouteStaticListingDir|TestRouteStaticFileFS|TestMiddlewareCalledOnceByRouterStaticFSNotFound|TestRouteStaticNoListing|TestRouteRawPathNoUnescape|TestRouteNotOK|TestRouterMethod|TestRouteNotAllowedDisabled|TestRouteStaticFile)$' github.com/gin-gonic/gin