#!/bin/bash

# Entrypoint script for ModSecurity CVE-2025-48866 Docker container
# This script runs Apache in the foreground and can restart if the process dies

set -e

# Ensure log directory exists
mkdir -p /var/log/apache2
touch /var/log/modsec_audit.log
chown www-data:www-data /var/log/modsec_audit.log

# Ensure Apache PID directory exists
mkdir -p /var/run/apache2

# Start Apache in foreground
exec apachectl -D FOREGROUND
