#!/bin/bash
set -e
cd "$(dirname "$0")"

# Python packages are pre-installed in the Docker image

echo "=== Running tests ==="
timeout 120 python3 -m pytest . -rA -v
exit_code=$?

if [ $exit_code -eq 124 ]; then
    echo "ERROR: Tests timed out"
    exit 1
fi

exit $exit_code
