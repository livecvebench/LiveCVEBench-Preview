<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.LcHisMutilDao">
    <!--查询列表-->
    <select id="getLcHisMutilListByCondition" resultType="jehc.djshi.workflow.model.LcHisMutil" parameterType="map">
        SELECT
            assignee,
            assignee_text AS assigneeText,
            pro_inst_id AS proInstId,
            activity_id AS activityId,
            activity_name AS activityName,
            execute_id AS executeId,
            batch
        FROM
          lc_his_mutil
        WHERE 1=1
        <if test="null != proInstId">
            AND pro_inst_id = #{proInstId}
        </if>
        <if test="null != activityId">
            AND activity_id = #{activityId}
        </if>
        <if test="null != executeId">
            AND execute_id = #{executeId}
        </if>
        <if test="null != batch">
            AND batch = #{batch}
        </if>
    </select>

    <!--添加-->
    <insert id="addLcHisMutil" parameterType="jehc.djshi.workflow.model.LcHisMutil">
        INSERT INTO
        lc_his_mutil
        (
        id,
        assignee,
        assignee_text,
        pro_inst_id,
        activity_id,
        activity_name,
        execute_id,
        create_id,
        update_id,
        create_time,
        update_time,
        batch
        )
        VALUES
        (
        #{id},
        #{assignee},
        #{assigneeText},
        #{proInstId},
        #{activityId},
        #{activityName},
        #{executeId},
        #{createId},
        #{updateId},
        #{createTime},
        #{updateTime},
        #{batch}
        )
    </insert>

    <!--批量添加-->
    <insert id="addBatchLcHisMutil" parameterType="list">
        INSERT INTO
        lc_his_mutil
        (
        id,
        assignee,
        assignee_text,
        pro_inst_id,
        activity_id,
        activity_name,
        execute_id,
        create_id,
        update_id,
        create_time,
        update_time,
        batch
        )
        VALUES
        <foreach collection="list" item="item" index="index" separator=",">
        (
        #{item.id},
        #{item.assignee},
        #{item.assigneeText},
        #{item.proInstId},
        #{item.activityId},
        #{item.activityName},
        #{item.executeId},
        #{item.createId},
        #{item.updateId},
        #{item.createTime},
        #{item.updateTime},
        #{item.batch}
        )
        </foreach>
    </insert>

    <!--删除-->
    <delete id="delLcHisMutil" parameterType="map">
        DELETE FROM lc_his_mutil WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <!--获取最大批次-->
    <select id="getMaxBatch" resultType="java.lang.Integer" parameterType="jehc.djshi.workflow.model.LcHisMutil">
        SELECT
          max(batch)
        FROM
          lc_his_mutil
        WHERE 1=1
        <if test="null != proInstId">
            AND pro_inst_id = #{proInstId}
        </if>
        <if test="null != activityId">
            AND activity_id = #{activityId}
        </if>
        <if test="null != execute_id">
            AND execute_id = #{executeId}
        </if>
    </select>
</mapper>