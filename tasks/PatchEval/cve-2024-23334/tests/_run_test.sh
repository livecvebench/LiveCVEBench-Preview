#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-23334:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/aiohttp
git apply --whitespace=nowarn /tests/test.patch 
cd tests && /workspace/PoC_env/CVE-2024-23334/bin/python -m pytest -p no:aiohttp test_web_urldispatcher.py::test_follow_symlink_directory_traversal test_web_urldispatcher.py::test_follow_symlink_directory_traversal_after_normalization -v

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-23334:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/aiohttp
cd tests && /workspace/PoC_env/CVE-2024-23334/bin/python -m pytest -p no:aiohttp test_web_urldispatcher.py -v -k "not test_follow_symlink_directory_traversal_after_normalization and not test_access_to_the_file_with_spaces and not test_follow_symlink_directory_traversal and not test_follow_symlink_directory_traversal_after_normalization" -p no:warning --disable-warnings