# H2O HTTP/2 Server Configuration for CVE-2025-8671 Testing
# This config enables HTTP/2 with default settings (vulnerable to MadeYouReset)

hosts:
  "localhost":
    listen:
      port: 8080
    listen:
      port: 8081
      ssl:
        certificate-file: /etc/h2o/server.crt
        key-file: /etc/h2o/server.key
    paths:
      "/":
        file.dir: /var/www/html

# HTTP/2 settings - low values to make reset budget exhaustion faster
http2-max-concurrent-requests-per-connection: 10
http2-idle-timeout: 10
# DoS delay when reset budget is exhausted (2000ms = 2 seconds)
# This large value ensures the delay is observable when budget is exhausted
http2-dos-delay: 2000

# Access and error logs
access-log: /var/log/h2o/access.log
error-log: /var/log/h2o/error.log
