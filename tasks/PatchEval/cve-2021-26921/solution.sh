cat <<'EOF' > /workspace/fix.patch
diff --git a/util/session/sessionmanager.go b/util/session/sessionmanager.go
index 2bd99f9fd4a25..a1e3df39337e7 100644
--- a/util/session/sessionmanager.go
+++ b/util/session/sessionmanager.go
@@ -283,6 +283,10 @@ func (mgr *SessionManager) Parse(tokenString string) (jwt.Claims, error) {
 		return nil, err
 	}
 
+	if !account.Enabled {
+		return nil, fmt.Errorf("account %s is disabled", subject)
+	}
+
 	if id := jwtutil.StringField(claims, "jti"); id != "" && account.TokenIndex(id) == -1 {
 		return nil, fmt.Errorf("account %s does not have token with id %s", subject, id)
 	}


EOF

cd /workspace/argo-cd
git apply --whitespace=nowarn  /workspace/fix.patch