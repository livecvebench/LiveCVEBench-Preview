<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.workflow.dao.LcGroupDao">
    <select id="getLcGroupList" resultType="jehc.djshi.workflow.model.LcGroup" parameterType="map">
        SELECT
            lc_group.id,
            lc_group.lc_product_id AS lcProductId,
            lc_group.name,
            lc_product.name AS productName,
            lc_group.create_time AS createTime,
            lc_group.update_time AS updateTime,
            lc_group.create_id AS createId,
            lc_group.update_id AS updateTd
        FROM
            lc_group lc_group LEFT JOIN lc_product lc_product ON lc_product.id = lc_group.lc_product_id
        WHERE 1=1
            AND lc_group.del_flag = 0
            <if test="null != name">
                AND instr(lc_group.name,#{name})
            </if>
            <if test="null != lcProductId">
                AND lc_group.lc_product_id= #{lcProductId}
            </if>
    </select>

    <!--查询对象-->
    <select id="getLcGroupById" resultType="jehc.djshi.workflow.model.LcGroup" parameterType="string">
        SELECT
            lc_group.id,
            lc_group.lc_product_id AS lcProductId,
            lc_group.name,
            lc_product.name AS productName,
            lc_group.create_time AS createTime,
            lc_group.update_time AS updateTime,
            lc_group.create_id AS createId,
            lc_group.update_id AS updateTd
        FROM
          lc_group lc_group LEFT JOIN lc_product lc_product ON lc_product.id = lc_group.lc_product_id
        WHERE lc_group.id=#{id}
    </select>

    <!--添加-->
    <insert id="addLcGroup" parameterType="jehc.djshi.workflow.model.LcGroup">
        INSERT INTO
        lc_group
        (
        id,
        lc_product_id,
        name,
        create_time,
        create_id
        )
        VALUES
        (
        #{id},
        #{lc_product_id},
        #{name},
        #{createTime},
        #{createId}
        )
    </insert>

    <!--修改-->
    <update id="updateLcGroup" parameterType="jehc.djshi.workflow.model.LcGroup">
        UPDATE
            lc_group
        SET
            <if test="null != name">
              name = #{name},
            </if>
            update_time = #{updateTime},
            update_id = #{updateId}
        WHERE id=#{id}
    </update>

    <!--删除-->
    <delete id="delLcGroup" parameterType="map">
        UPDATE lc_group SET del_flag = 1 WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>
</mapper>