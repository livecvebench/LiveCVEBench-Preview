<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.oauth.dao.OauthFunctionCommonDao">
	<!--初始化分页-->
	<select id="getOauthFunctionCommonListByCondition" resultType="jehc.djshi.oauth.model.OauthFunctionCommon" parameterType="map">
		SELECT
			oauth_function_common.id,
			oauth_function_common.name,
			oauth_function_common.url,
			oauth_function_common.method,
			oauth_function_common.status,
			oauth_function_common.content,
			oauth_function_common.sys_mode_id AS sysModeId,
			oauth_sys_mode.name AS sysName,
			oauth_function_common.create_id AS createId,
			oauth_function_common.update_id AS updateId,
			oauth_function_common.create_time AS createTime,
			oauth_function_common.update_time AS updateTime
		FROM 
			oauth_function_common oauth_function_common LEFT JOIN oauth_sys_mode oauth_sys_mode ON oauth_sys_mode.id = oauth_function_common.sys_mode_id
		WHERE 1=1
		<if test="null != name">
			AND oauth_function_common.name LIKE CONCAT(CONCAT('%',#{name}),'%')
		</if>
		<if test="null != status">
			AND oauth_function_common.status = #{status}
		</if>
		<if test="null != sysModeId">
			AND oauth_function_common.sys_mode_id = #{sysModeId}
		</if>
	</select>

	<!--查询对象-->
	<select id="getOauthFunctionCommonById" resultType="jehc.djshi.oauth.model.OauthFunctionCommon" parameterType="string">
		SELECT
			oauth_function_common.id,
			oauth_function_common.name,
			oauth_function_common.url,
			oauth_function_common.method,
			oauth_function_common.status,
			oauth_function_common.content,
			oauth_function_common.sys_mode_id AS sysModeId,
			oauth_function_common.create_id AS createId,
			oauth_function_common.update_id AS updateId,
			oauth_function_common.create_time AS createTime,
			oauth_function_common.update_time AS updateTime
		FROM 
			oauth_function_common oauth_function_common
		WHERE oauth_function_common.id=#{id}
	</select>

	<!--添加-->
	<insert id="addOauthFunctionCommon" parameterType="jehc.djshi.oauth.model.OauthFunctionCommon">
		INSERT INTO
			oauth_function_common
			(
			id,
			name,
			url,
			method,
			status,
			content,
			create_time,
			sys_mode_id,
			create_id
			)
			VALUES
			(
			#{id},
			#{name},
			#{url},
			#{method},
			#{status},
			#{content},
			#{createTime},
			#{sysModeId},
			#{createId}
			)
	</insert>

	<!--修改-->
	<update id="updateOauthFunctionCommon" parameterType="jehc.djshi.oauth.model.OauthFunctionCommon">
		UPDATE
			oauth_function_common
		SET
			name = #{name},
			url = #{url},
			method = #{method},
			update_time = #{updateTime},
			status = #{status},
			content = #{content},
			sys_mode_id = #{sysModeId},
			update_id = #{updateId}
		WHERE id=#{id}
	</update>

	<!--修改（根据动态条件）-->
	<update id="updateOauthFunctionCommonBySelective" parameterType="jehc.djshi.oauth.model.OauthFunctionCommon">
		UPDATE
			oauth_function_common
		<set>
			<if test="name != null">
				name = #{name},
			</if>
			<if test="url != null">
				url = #{url},
			</if>
			<if test="method != null">
				method = #{method},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="status != null">
				status = #{status},
			</if>
			<if test="content != null">
				content = #{content},
			</if>
			<if test="sysModeId != null">
				sys_mode_id = #{sysModeId},
			</if>
			<if test="updateId != null">
				update_id = #{updateId},
			</if>

		</set>
		WHERE id=#{id}
	</update>

	<!--删除-->
	<delete id="delOauthFunctionCommon" parameterType="map">
		DELETE FROM oauth_function_common WHERE id IN
		<foreach item="item" index="index" collection="id" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>

	<!--批量修改-->
	<update id="updateBatchOauthFunctionCommon" parameterType="list">
		<foreach collection="list" item="item" index="index" open="" close="" separator=";">
			UPDATE
				oauth_function_common
			SET
				name = #{item.name},
				url = #{item.url},
				method = #{item.method},
				update_time = #{item.updateTime},
				status = #{item.status},
				content = #{item.content},
				sys_mode_id = #{item.sysModeId},
				update_id = #{item.updateId}
			WHERE id=#{item.id}
		</foreach>
	</update>

	<!--批量修改（根据动态条件）-->
	<update id="updateBatchOauthFunctionCommonBySelective" parameterType="list">
		<foreach collection="list" item="item" index="index" open="" close="" separator=";">
			UPDATE
				oauth_function_common
			<set>
				<if test="item.name != null">
					name = #{item.name},
				</if>
				<if test="item.url != null">
					url = #{item.url},
				</if>
				<if test="item.method != null">
					method = #{item.method},
				</if>
				<if test="item.updateTime != null">
					update_time = #{item.updateTime},
				</if>
				<if test="item.status != null">
					status = #{item.status},
				</if>
				<if test="item.content != null">
					content = #{item.content},
				</if>
				<if test="item.sysModeId != null">
					sys_mode_id = #{item.sysModeId},
				</if>
				<if test="item.updateId != null">
					update_id = #{item.updateId},
				</if>
			</set>
			WHERE id=#{item.id}
		</foreach>
	</update>
</mapper>