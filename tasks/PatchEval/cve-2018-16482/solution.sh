cat <<'EOF' > /workspace/fix.patch
diff --git a/lib/staticFileHandler.js b/lib/staticFileHandler.js
index cfdc1c7..e367860 100644
--- a/lib/staticFileHandler.js
+++ b/lib/staticFileHandler.js
@@ -15,8 +15,8 @@ module.exports = function staticFileListener(options, nextHandler){
     return function(req,res){
         var root = options.root;
         var mockPaths = getMockPathForMethod(options,req.method);
-
-        var filePath = httpHelpers.getRequestPathFromUrl(req.url);
+        //fixing path traversal issue - CVE-2018-16482
+        var filePath = httpHelpers.getRequestPathFromUrl(path.normalize(req.url));
         var mockedFilePath = findMockFilePath(filePath,mockPaths);
         if(mockedFilePath)
             filePath = mockedFilePath;
@@ -71,4 +71,4 @@ var findMockFilePath = function(filePath,mockPaths){
     }
 
     return undefined;
-};
\ No newline at end of file
+};


EOF

cd /workspace/mcstatic
git apply --whitespace=nowarn  /workspace/fix.patch