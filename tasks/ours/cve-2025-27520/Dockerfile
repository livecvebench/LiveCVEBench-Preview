FROM python:3.11-slim

WORKDIR /app

# Install system dependencies (tmux, asciinema, curl are required)
RUN apt-get update && apt-get install -y \
    curl \
    git \
    tmux \
    asciinema \
    procps \
    && rm -rf /var/lib/apt/lists/*

# Install BentoML vulnerable version (1.4.2)
RUN pip install --no-cache-dir bentoml==1.4.2

# Copy service file
COPY task-deps/service.py /app/service.py

# Copy entrypoint script
COPY task-deps/entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh


# Start BentoML service via entrypoint
# CMD ["/entrypoint.sh"]
