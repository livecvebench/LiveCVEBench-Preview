server:
  port: 8082
spring:
  application:
    name: jehc-api
  main:
    allow-bean-definition-overriding: true
  datasource:
    initialization-mode: always
  activiti:
    database-schema-update: true
    check-process-definitions: false
    async-executor-enabled: true
    job-executor-activate: false
  session:
    store-type: none
  redis:
    host: redis
    port: 6379
    password:
    timeout: 5000
    maxIdle: 20
    maxActive: -1
    maxTotal: 100
    maxWaitMillis: 100
    minEvictableIdleTimeMillis: 864000000
    numTestsPerEvictionRun: 10
    timeBetweenEvictionRunsMillis: 300000
    testOnBorrow: true
    testWhileIdle: false
    database: 0

logging:
  config: classpath:config/logback.xml

mybatis:
  typeAliasesPackage: jehc.djshi.*.model
  mapperLocations: classpath*:jehc/djshi/*/dao/mapper/*.xml
  configLocation: classpath:/config/mybatis/mybatis.xml
  configuration-properties:
      offsetAsPageNum: true
      rowBoundsWithCount: true
      reasonable: true

jehc.cloud.key: k8slp3Y0_pdB8rNNeok4DbNugxB1MM9bVQzYrCcF8zQ
jehc.cloud.security: eyJpYXQiOjE1NjE2OTU5NzMsInN1YiI6IntcImNsaWVudGlkXCI6XCIwNmU0MDc1ZTAwYTg0MWM4YTE0ZmVmOTJlMGUwMDdmNlwifSIsImV4cCI6MTU2MTY5Nzc3M30

jehc.djshi.job.clientId: oauth-job-client-1001
jehc.djshi.job.clientGroupId: oauth-job-client-group-1001
jehc.djshi.job.host: 127.0.0.1
jehc.djshi.job.port: 9099

jehc.oauth.serverHost: 127.0.0.1
jehc.oauth.serverPort: 22088
jehc.oauth.serverId: oauthServer
jehc.oauth.serverGroupId: oauthServer

management:
  endpoints:
    web:
      exposure:
        include: '*'

# MySQL connection - using Docker service name
master.driverClassName: com.mysql.jdbc.Driver
master.url: jdbc:mysql://mysql:3306/jehc-2.0-workflow?characterEncoding=UTF-8&useUnicode=true&useSSL=false&serverTimezone=GMT%2B8&zeroDateTimeBehavior=CONVERT_TO_NULL&allowMultiQueries=true&allowPublicKeyRetrieval=true
master.username: root
master.password: root123

ip: mysql
port: 3306
dbname: jehc-2.0-workflow
databasetype: mysql

slave.driverClassName: com.mysql.jdbc.Driver
slave.url: jdbc:mysql://mysql:3306/jehc-2.0-workflow?characterEncoding=UTF-8&useUnicode=true&useSSL=false&serverTimezone=GMT%2B8&zeroDateTimeBehavior=CONVERT_TO_NULL&allowMultiQueries=true&allowPublicKeyRetrieval=true
slave.username: root
slave.password: root123
slave.ip: mysql
slave.port: 3306
slave.dbname: jehc-2.0-workflow
slave.databasetype: mysql

jehc.driverClassTest: com.mysql.jdbc.Driver
jehc.urlTest: jdbc:mysql://mysql:3306/jehc-2.0-workflow?characterEncoding=UTF-8&useUnicode=true&useSSL=false&serverTimezone=GMT%2B8&zeroDateTimeBehavior=CONVERT_TO_NULL&allowMultiQueries=true&allowPublicKeyRetrieval=true
jehc.usernameTest: root
jehc.passwordTest: root123

# Druid connection pool
jehc.filters: stat,slf4j
jehc.maxActive: 5
jehc.initialSize: 2
jehc.maxWait: 60000
jehc.minIdle: 1
jehc.timeBetweenEvictionRunsMillis: 60000
jehc.minEvictableIdleTimeMillis: 300000
jehc.testWhileIdle: true
jehc.testOnBorrow: false
jehc.testOnReturn: false
jehc.poolPreparedStatements: true
jehc.maxOpenPreparedStatements: 20
jehc.maxEvictableIdleTimeMillis: 900000
jehc.datasource.type: com.alibaba.druid.pool.DruidDataSource
jehc.datasource.driverClassName: com.mysql.jdbc.Driver
jehc.maxPoolPreparedStatementPerConnectionSize: 20
jehc.validationQuery: SELECT 'x'
jehc.connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000
jehc.allow: ""
jehc.deny: ""
jehc.loginUsername: druid
jehc.loginPassword: 123456
jehc.resetEnable: false
jehc.exclusions: "*.js,*.gif,*.jpg,*.png,*.css,*.ico,/monitor/druid/*"
jehc.mergeSql: true
jehc.slowSqlMillis: 1000
jehc.logSlowSql: true

# MinIO config (dummy for basic functionality)
minio.endpoint: http://localhost
minio.port: 9000
minio.accessKey: admin
minio.secretKey: admin
minio.bucketName: iletter
minio.secure: false
minio.configDir: /opt/file/

# Office configuration
jehc.office.home: /usr/lib/libreoffice
jehc.office.ports: 2005,2006
jehc.office.maxTasksPerProcess: 100
jehc.office.processTimeout: 120000
jehc.office.taskQueueTimeout: 30000
jehc.office.taskExecutionTimeout: 120000

# Upload file size limits
spring.servlet.multipart.maxFileSize: 100MB
spring.servlet.multipart.maxRequestSize: 120MB

# Email config (dummy)
jehc.mail.host: smtp.example.com
jehc.mail.userName: test@example.com
jehc.mail.password: password
jehc.mail.port: 465
jehc.mail.smtp.auth: false
jehc.mail.smtp.ssl.enable: false

# Actuator SDK configuration
jehc:
  omp:
    actuator:
      log:
        path: /app/logs/jehc/${spring.application.name}.log
      client:
        uri:
          hasPrefixApplicationName: false
          clientHttpPrefix: http
          keepTimes: 300000
          enabled: true
          address: http://localhost:8082
