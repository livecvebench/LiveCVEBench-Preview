#!/bin/bash
set -e

cd /app/GitPython
git apply --whitespace=nowarn /tests/test.patch
/app/PoC_env/CVE-2023-41040/bin/python -m pytest test/test_refs.py::TestRefs::test_validity_ref_names
/app/PoC_env/CVE-2023-41040/bin/python -m pytest test/test_refs.py -k "not test_head_checkout_detached_head and not test_is_valid and not test_tag_message and not test_heads and not test_head_reset and not test_tags_author and not test_tag_base" --deselect=test/test_refs.py::TestRefs::test_refs -p no:warning --disable-warnings
