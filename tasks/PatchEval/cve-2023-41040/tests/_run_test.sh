#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-41040:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/GitPython
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2023-41040/bin/python -m pytest test/test_refs.py::TestRefs::test_validity_ref_names

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-41040:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/GitPython
/workspace/PoC_env/CVE-2023-41040/bin/python -m pytest test/test_refs.py -k "not test_head_checkout_detached_head and not test_is_valid and not test_tag_message and not test_heads and not test_head_reset and not test_tags_author and not test_tag_base" --deselect=test/test_refs.py::TestRefs::test_refs -p no:warning --disable-warnings