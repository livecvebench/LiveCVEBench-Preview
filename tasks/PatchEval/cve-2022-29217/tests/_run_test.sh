#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-29217:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/pyjwt
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2022-29217/bin/python -m pytest tests/test_advisory.py tests/test_algorithms.py::TestOKPAlgorithms::test_okp_ed25519_should_reject_non_string_key -v

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-29217:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/pyjwt
/workspace/PoC_env/CVE-2022-29217/bin/python -m pytest tests/test_algorithms.py -v -k "not test_okp_ed25519_should_reject_non_string_key" -p no:warning --disable-warnings