#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-3848:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/mlflow
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2024-3848/bin/python -m pytest tests/server/test_handlers.py::test_local_file_read_write_by_pass_vulnerability -p no:warning --disable-warnings

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-3848:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/mlflow
/workspace/PoC_env/CVE-2024-3848/bin/python -m pytest tests/server/test_handlers.py -k "not test_mlflow_server_with_installed_plugin" -p no:warning --disable-warnings 