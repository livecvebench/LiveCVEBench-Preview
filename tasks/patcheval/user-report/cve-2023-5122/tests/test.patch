diff --git a/pkg/http_storage_test.go b/pkg/http_storage_test.go
index daf74ba..aff5473 100644
--- a/pkg/http_storage_test.go
+++ b/pkg/http_storage_test.go
@@ -8,6 +8,7 @@ import (
 	"io"
 	"net/http"
 	"net/http/httptest"
+	"net/url"
 	"reflect"
 	"testing"
 
@@ -191,3 +192,39 @@ func TestHTTPStorage_Options(t *testing.T) {
 		t.Fatal("server didn't receive any requests")
 	}
 }
+
+func TestHTTPStorage_UrlHandling(t *testing.T) {
+	instanceSettings := backend.DataSourceInstanceSettings{
+		URL: "http://localhost:8000",
+	}
+	badPath := "@example.com/test/1"
+	goodPath := "/test/1"
+
+	parsedSettingsURL, err := url.Parse(instanceSettings.URL)
+	if err != nil {
+		t.Fatal(err)
+	}
+
+	req1, err := newRequestFromQuery(&instanceSettings, dataSourceSettings{}, dataSourceQuery{
+		Path:   goodPath,
+		Method: "GET",
+	})
+
+	if err != nil {
+		t.Fatal(err)
+	}
+
+	if req1.URL.Host != parsedSettingsURL.Host {
+		t.Fatal("hostname changed because of the path")
+	}
+
+	_, err = newRequestFromQuery(&instanceSettings, dataSourceSettings{}, dataSourceQuery{
+		Path:   badPath,
+		Method: "GET",
+	})
+
+	// this must have failed
+	if err == nil {
+		t.Fatal("host-modifying path was accepted")
+	}
+}
