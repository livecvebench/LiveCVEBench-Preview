#!/bin/bash
# Entrypoint script for ModSecurity
# This script runs Apache and restarts it if it exits (for solution.sh compatibility)

# Run Apache in a loop so the container stays alive if the process is killed
while true; do
    echo "[entrypoint] Starting Apache with ModSecurity..."
    /usr/sbin/apache2ctl -D FOREGROUND
    exit_code=$?
    echo "[entrypoint] Apache exited with code $exit_code, restarting in 2 seconds..."
    sleep 2
done
