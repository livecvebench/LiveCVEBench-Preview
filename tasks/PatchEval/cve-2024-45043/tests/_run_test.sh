#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-45043:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/opentelemetry-collector-contrib
git apply --whitespace=nowarn /tests/test.patch 
cd ./receiver/awsfirehosereceiver && go test  -timeout 30s -run ^TestFirehoseRequest$ github.com/open-telemetry/opentelemetry-collector-contrib/receiver/awsfirehosereceiver

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2024-45043:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/opentelemetry-collector-contrib
cd ./receiver/awsfirehosereceiver && go test -timeout 30s -run '^(TestStart|TestFirehoseRequest)$' github.com/open-telemetry/opentelemetry-collector-contrib/receiver/awsfirehosereceiver