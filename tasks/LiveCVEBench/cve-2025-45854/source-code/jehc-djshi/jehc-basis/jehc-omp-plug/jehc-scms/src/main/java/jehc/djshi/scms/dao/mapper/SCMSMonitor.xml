<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.scms.dao.SCMSMonitorDao">
    <!--初始化分页-->
    <select id="getSCMSMonitorListByCondition" resultType="jehc.djshi.scms.model.SCMSMonitor" parameterType="map">
        SELECT
            id,
            user_name AS userName,
            account_name AS accountName,
            com_name AS comName,
            local_name AS localName,
            jvm_total_mem AS jvmTotalMem,
            jvm_mem AS jvmMem,
            operate_sys_name AS operateSysName,
            operate_org AS operateOrg,
            jvm_cpu_count AS jvmCpuCount,
            ip,
            environment,
            path,
            create_time AS createTime,
            update_time AS updateTime,
            mac
        FROM
          scms_monitor
        WHERE 1=1
        <if test="null != localName">
            AND local_name LIKE CONCAT(CONCAT('%',#{localName}),'%')
        </if>
        <if test="null != ip">
            AND ip LIKE CONCAT(CONCAT('%',#{ip}),'%')
        </if>
        ORDER BY create_time DESC
    </select>

    <!--查询对象-->
    <select id="getSCMSMonitorById" resultType="jehc.djshi.scms.model.SCMSMonitor" parameterType="string">
        SELECT
            id,
            user_name AS userName,
            account_name AS accountName,
            com_name AS comName,
            local_name AS localName,
            jvm_total_mem AS jvmTotalMem,
            jvm_mem AS jvmMem,
            operate_sys_name AS operateSysName,
            operate_org AS operateOrg,
            jvm_cpu_count AS jvmCpuCount,
            ip,
            environment,
            path,
            create_time AS createTime,
            update_time AS updateTime,
            mac
        FROM
            scms_monitor
        WHERE
            id=#{id}
    </select>

    <!--根据Mac查询对象-->
    <select id="getSCMSMonitorByMac" resultType="jehc.djshi.scms.model.SCMSMonitor" parameterType="string">
        SELECT
            id,
            user_name AS userName,
            account_name AS accountName,
            com_name AS comName,
            local_name AS localName,
            jvm_total_mem AS jvmTotalMem,
            jvm_mem AS jvmMem,
            operate_sys_name AS operateSysName,
            operate_org AS operateOrg,
            jvm_cpu_count AS jvmCpuCount,
            ip,
            environment,
            path,
            create_time AS createTime,
            update_time AS updateTime,
            mac
        FROM
            scms_monitor
        WHERE
          mac=#{mac}
    </select>

    <!--添加-->
    <insert id="addSCMSMonitor" parameterType="jehc.djshi.scms.model.SCMSMonitor">
        INSERT INTO
        scms_monitor
        (
        id,
        user_name,
        account_name,
        com_name,
        local_name,
        jvm_total_mem,
        jvm_mem,
        operate_sys_name,
        operate_org,
        jvm_cpu_count,
        ip,
        environment,
        path,
        create_time,
        del_flag,
        mac,
        update_time
        )
        VALUES
        (
        #{id},
        #{userName},
        #{accountName},
        #{comName},
        #{localName},
        #{jvmTotalMem},
        #{jvmMem},
        #{operateSysName},
        #{operateOrg},
        #{jvmCpuCount},
        #{ip},
        #{environment},
        #{path},
        #{createTime},
        0,
        #{mac},
        #{updateTime}
        )ON DUPLICATE KEY UPDATE ip = VALUES(ip),user_name = VALUES(user_name),
        account_name = VALUES(account_name),com_name = VALUES(com_name),
        local_name = VALUES(local_name),jvm_total_mem = VALUES(jvm_total_mem),
        operate_sys_name = VALUES(operate_sys_name),operate_org = VALUES(operate_org),
        jvm_cpu_count = VALUES(jvm_cpu_count),path = VALUES(path),
        environment = VALUES(environment),update_time = VALUES(update_time)
    </insert>

    <!--根据条件修改-->
    <update id="updateSCMSMonitorBySelective" parameterType="jehc.djshi.scms.model.SCMSMonitor">
        update scms_monitor
        <set>
            <if test="null != userName">
                user_name = #{userName},
            </if>
            <if test="null != accountName and '' != accountName">
                account_name = #{accountName},
            </if>
            <if test="null != comName and '' != comName">
                com_name = #{comName},
            </if>
            <if test="null != localName and '' != localName">
                local_name = #{localName},
            </if>
            <if test="null != name and '' != name">
                name = #{name},
            </if>
            <if test="null != jvmTotalMem and '' != jvmTotalMem">
                jvm_totalmem = #{jvmTotalMem},
            </if>
            <if test="null != jvmMem and '' != jvmMem">
                jvm_mem = #{jvmMem},
            </if>
            <if test="null != operateSysName and '' != operateSysName">
                operate_sys_name = #{operateSysName},
            </if>
            <if test="null != operateOrg and '' != operateOrg">
                operate_org = #{operateOrg},
            </if>
            <if test="null != jvmCpuCount and '' != jvmCpuCount">
                jvm_cpu_count = #{jvmCpuCount},
            </if>
            <if test="null != ip and '' != ip">
                ip = #{ip},
            </if>
            <if test="null != environment and '' != environment">
                environment = #{environment},
            </if>
            <if test="null != posName and '' != posName">
                pos_name = #{posName},
            </if>
            <if test="null != path and '' != path">
                path = #{path},
            </if>
            <if test="null != updateTime and '' != updateTime">
                update_time = #{updateTime},
            </if>
        </set>
        WHERE mac = #{mac}
    </update>

    <!--删除-->
    <delete id="delSCMSMonitor" parameterType="map">
        DELETE FROM scms_monitor WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>
</mapper>