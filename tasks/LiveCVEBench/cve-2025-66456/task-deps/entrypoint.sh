#!/bin/bash

# Entrypoint script with restart capability
# This allows solution.sh to restart the service after applying patches

cd /app

while true; do
    echo "Starting Elysia server..."
    bun run proto-pollution.ts &
    PID=$!

    # Wait for the process to exit
    wait $PID
    EXIT_CODE=$?

    echo "Elysia server exited with code $EXIT_CODE. Restarting in 1 second..."
    sleep 1
done
