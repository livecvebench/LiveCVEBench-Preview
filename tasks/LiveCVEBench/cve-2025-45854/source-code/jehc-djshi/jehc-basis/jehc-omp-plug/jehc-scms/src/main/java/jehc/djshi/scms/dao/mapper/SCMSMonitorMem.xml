<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.scms.dao.SCMSMonitorMemDao">
    <!--初始化分页-->
    <select id="getSCMSMonitorMemListByCondition" resultType="jehc.djshi.scms.model.SCMSMonitorMem" parameterType="map">
        SELECT
            scms_monitor_mem.id,
            scms_monitor_mem.mac,
            scms_monitor_mem.mem_total AS memTotal,
            scms_monitor_mem.mem_curr_use AS memCurrUse,
            scms_monitor_mem.mem_curr_sy AS memCurrSy,
            scms_monitor_mem.mem_jh_total AS memJhTotal,
            scms_monitor_mem.mem_jh_curr_use AS memJhCurrUse,
            scms_monitor_mem.mem_jh_sy AS memJhSy,
            scms_monitor_mem.create_time AS createTime,
            scms_monitor.local_name AS localName,
            scms_monitor.ip
        FROM
            scms_monitor_mem scms_monitor_mem LEFT JOIN scms_monitor scms_monitor ON scms_monitor.mac = scms_monitor_mem.mac
        WHERE 1=1
            <if test="null != localName">
                AND scms_monitor.local_name LIKE CONCAT(CONCAT('%',#{localName}),'%')
            </if>
            <if test="null != ip">
                AND scms_monitor.ip LIKE CONCAT(CONCAT('%',#{ip}),'%')
            </if>
            ORDER BY scms_monitor_mem.create_time DESC
    </select>

    <!--查询列表-->
    <select id="getSCMSMonitorMemList" resultType="jehc.djshi.scms.model.SCMSMonitorMem" parameterType="jehc.djshi.scms.model.SCMSMonitorMem">
        SELECT
            scms_monitor_mem.id,
            scms_monitor_mem.mac,
            scms_monitor_mem.mem_total AS memTotal,
            scms_monitor_mem.mem_curr_use AS memCurrUse,
            scms_monitor_mem.mem_curr_sy AS memCurrSy,
            scms_monitor_mem.mem_jh_total AS memJhTotal,
            scms_monitor_mem.mem_jh_curr_use AS memJhCurrUse,
            scms_monitor_mem.mem_jh_sy AS memJhSy,
            scms_monitor_mem.create_time AS createTime
        FROM
          scms_monitor_mem scms_monitor_mem
        WHERE 1=1
        <if test="null != mac">
            AND scms_monitor_mem.mac = #{mac}
        </if>
        ORDER BY scms_monitor_mem.create_time DESC
    </select>

    <!--查询对象-->
    <select id="getSCMSMonitorMemById" resultType="jehc.djshi.scms.model.SCMSMonitorMem" parameterType="string">
        SELECT
            scms_monitor_mem.id,
            scms_monitor_mem.mac,
            scms_monitor_mem.mem_total AS memTotal,
            scms_monitor_mem.mem_curr_use AS memCurrUse,
            scms_monitor_mem.mem_curr_sy AS memCurrSy,
            scms_monitor_mem.mem_jh_total AS memJhTotal,
            scms_monitor_mem.mem_jh_curr_use AS memJhCurrUse,
            scms_monitor_mem.mem_jh_sy AS memJhSy,
            scms_monitor_mem.create_time AS createTime,
            scms_monitor.local_name AS localName,
            scms_monitor.ip
        FROM
          scms_monitor_mem scms_monitor_mem LEFT JOIN scms_monitor scms_monitor ON scms_monitor.mac = scms_monitor_mem.mac
        WHERE
          scms_monitor_mem.id=#{id}
    </select>

    <!--添加-->
    <insert id="addSCMSMonitorMem" parameterType="jehc.djshi.scms.model.SCMSMonitorMem">
        INSERT INTO
        scms_monitor_mem
        (
        id,
        mac,
        mem_total,
        mem_curr_use,
        mem_curr_sy,
        mem_jh_total,
        mem_jh_curr_use,
        mem_jh_sy,
        create_time,
        del_flag
        )
        VALUES
        (
        #{id},
        #{mac},
        #{memTotal},
        #{memCurrUse},
        #{memCurrSy},
        #{memJhTotal},
        #{memJhCurrUse},
        #{memJhSy},
        #{createTime},
        0
        )
    </insert>

    <!--删除-->
    <delete id="delSCMSMonitorMem" parameterType="map">
        DELETE FROM scms_monitor_mem WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>
</mapper>