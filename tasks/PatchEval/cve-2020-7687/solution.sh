cat <<'EOF' > /workspace/fix.patch
diff --git a/index.js b/index.js
index 2100676..9e9f535 100644
--- a/index.js
+++ b/index.js
@@ -9,8 +9,9 @@ module.exports = function (port, root, wordy) {
     if (wordy === undefined) wordy = false;
     if (port === undefined) port = 80;
     var server = http.createServer(function (req, res) {
+        var reqUrl = req.url.replace(/(\.\.\/?)/g, '');
 
-        var uri = url.parse(req.url).pathname,
+        var uri = url.parse(reqUrl).pathname,
             filename = path.join(root, uri);
 
         if (uri.charAt(uri.length - 1) === '/') {


EOF

cd /workspace/fast-http
git apply --whitespace=nowarn  /workspace/fix.patch