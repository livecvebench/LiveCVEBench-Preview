#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-34457:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/MechanicalSoup
git apply --whitespace=nowarn /tests/test.patch 
/workspace/PoC_env/CVE-2023-34457/bin/python -m pytest tests/test_browser.py::test_enctype_and_file_submit tests/test_stateful_browser.py::test_upload_file_with_malicious_default tests/test_stateful_browser.py::test_upload_file tests/test_stateful_browser.py::test_upload_file_raise_on_string_input

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2023-34457:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/MechanicalSoup
/workspace/PoC_env/CVE-2023-34457/bin/python -m pytest tests/test_browser.py tests/test_stateful_browser.py -k "not test_enctype_and_file_submit and not test_upload_file and not test_select_form_associated_elements and not test_launch_browser" -p no:warning --disable-warnings