#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-31145:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/flyteadmin
git apply --whitespace=nowarn /tests/test.patch 
go test -timeout 30s -run ^TestResourceServer_ValidateAccessToken$ github.com/flyteorg/flyteadmin/auth/authzserver

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2022-31145:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/flyteadmin
go test -timeout 30s -run '^(TestEncryptDecrypt|TestAuthCallbackEndpoint|Test_unmarshalResp|TestGetIssuer|TestResourceServer_ValidateAccessToken|TestAuthEndpoint|Test_getJwksForIssuer|Test_doRequest|TestNewOAuth2ResourceServer)$' github.com/flyteorg/flyteadmin/auth/authzserver