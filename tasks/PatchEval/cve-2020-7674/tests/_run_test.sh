#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2020-7674:latest
# bash /workspace/fix-run.sh
set -e

cd /workspace/access-policy
git apply --whitespace=nowarn /tests/test.patch 
jest ./poc

cd /workspace
#!/bin/bash
# From ghcr.io/anonymous2578-data/cve-2020-7674:latest
# bash /workspace/unit_test.sh
set -e

cd /workspace/access-policy
npx mocha --grep "should not allow path '/user/12345/bill'|should throw a SyntaxError|should return the exact policy when no data is provided|should return an object|should throw a syntax error with less than 2 parameters|should thorw a syntax error when missing \`action\`|should not allow path '/user/123456'|should thorw a syntax error when missing \`resource\`|should always be false when length 0|should throw a type error"