cat <<'EOF' > /workspace/fix.patch
diff --git a/lib/index.js b/lib/index.js
index 767584b..58b1550 100644
--- a/lib/index.js
+++ b/lib/index.js
@@ -38,7 +38,12 @@ module.exports = function df(aOptions, aCallback) {
         command += ' ' + options.file
     }
 
-    exec(command, function(err, stdout, stderr) {
+    // escaping chars to prevent command injection
+    var escapeShell = function(command) {
+        return '"'+command.replace(/(["\s'$`\\])/g,'\\$1')+'"'
+    };
+
+    exec(escapeShell(command), function(err, stdout, stderr) {
         if (err) {
             callback(err)
             return


EOF

cd /workspace/node-df
git apply --whitespace=nowarn  /workspace/fix.patch