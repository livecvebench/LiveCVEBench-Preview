<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jehc.djshi.omp.dao.OMPRedisConfigDao">
    <!--初始化分页-->
    <select id="getRedisConfigListByCondition" resultType="jehc.djshi.omp.model.OMPRedisConfig" parameterType="map">
        SELECT
            id,
            name,
            host,
            password,
            port,
            max_total AS maxTotal,
            max_idle AS maxIdle,
            max_wait_millis AS maxWaitMillis,
            test_on_borrow AS testOnBorrow,
            timeout,
            create_time AS createTime,
            update_time AS updateTime,
            create_id AS createId,
            update_id AS updateId,
            sort
        FROM
          omp_redis_config
        WHERE 1=1 AND del_flag = 0
        <if test="null != name">
            AND name LIKE CONCAT(CONCAT('%',#{name}),'%')
        </if>
        <if test="null != host">
            AND host LIKE CONCAT(CONCAT('%',#{host}),'%')
        </if>
        <if test="null != id and '' != id">
            AND id IN
            <foreach item="item" index="index" collection="id.split(',')" open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
        ORDER BY sort ASC
    </select>

    <!--根据id查找列表-->
    <select id="getRedisConfigList" resultType="jehc.djshi.omp.model.OMPRedisConfig" parameterType="map">
        SELECT
            id,
            name,
            host,
            password,
            port,
            max_total AS maxTotal,
            max_idle AS maxIdle,
            max_wait_millis AS maxWaitMillis,
            test_on_borrow AS testOnBorrow,
            timeout,
            create_time AS createTime,
            update_time AS updateTime,
            create_id AS createId,
            update_id AS updateId,
            sort
        FROM
            omp_redis_config
        WHERE 1=1
            AND id IN
            <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
                #{item}
            </foreach>
    </select>

    <!--查询对象-->
    <select id="getRedisConfigById" resultType="jehc.djshi.omp.model.OMPRedisConfig" parameterType="string">
        SELECT
            id,
            name,
            host,
            password,
            port,
            max_total AS maxTotal,
            max_idle AS maxIdle,
            max_wait_millis AS maxWaitMillis,
            test_on_borrow AS testOnBorrow,
            timeout,
            create_time AS createTime,
            update_time AS updateTime,
            create_id AS createId,
            update_id AS updateId,
            sort
        FROM
            omp_redis_config
        WHERE
            id=#{id}
    </select>

    <!--添加-->
    <insert id="addRedisConfig" parameterType="jehc.djshi.omp.model.OMPRedisConfig">
        INSERT INTO
        omp_redis_config
        (
        id,
        name,
        host,
        password,
        port,
        max_total,
        max_idle,
        max_wait_millis,
        test_on_borrow,
        timeout,
        create_time,
        update_time,
        create_id,
        update_id,
        del_flag,
        sort
        )
        VALUES
        (
        #{id},
        #{name},
        #{host},
        #{password},
        #{port},
        #{maxTotal},
        #{maxIdle},
        #{maxWaitMillis},
        #{testOnBorrow},
        #{timeout},
        #{createTime},
        #{updateTime},
        #{createId},
        #{updateId},
        0,
        #{sort}
        )
    </insert>

    <!--修改-->
    <update id="updateRedisConfig" parameterType="jehc.djshi.omp.model.OMPRedisConfig">
        UPDATE
            omp_redis_config
        SET
            name = #{name},
            host = #{host},
            password = #{password},
            port = #{port},
            max_total = #{maxTotal},
            max_idle = #{maxIdle},
            max_wait_millis = #{maxWaitMillis},
            test_on_borrow = #{testOnBorrow},
            update_time = #{updateTime},
            timeout = #{timeout},
            sort = #{sort},
            update_id = #{updateId}
        WHERE id=#{id}
    </update>

    <!--删除-->
    <update id="delRedisConfig" parameterType="map">
        UPDATE omp_redis_config SET del_flag = 1 WHERE id IN
        <foreach item="item" index="index" collection="id" open="(" separator="," close=")">
            #{item}
        </foreach>
    </update>
</mapper>